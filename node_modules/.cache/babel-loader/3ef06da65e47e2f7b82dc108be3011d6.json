{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\executionDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\executionDialog.vue","mtime":1695288475461},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEpvYkV4ZWN1dGlvbnMgfSBmcm9tICdAL2FwaS9zeXN0ZW0vam9icyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRXhlY3V0aW9uRGlhbG9nJywKICBwcm9wczogewogICAgZXhlY3V0aW9uRGlhbG9nVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGpvYklEOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDEwLAogICAgICAgIHNlYXJjaDogJycsCiAgICAgICAgam9iX19pZDogJycKICAgICAgfSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGRldGFpbHNEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZXJyb3JEZXRhaWxzOiAnJwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBleGVjdXRpb25EaWFsb2dWaXNpYmxlOiBmdW5jdGlvbiBleGVjdXRpb25EaWFsb2dWaXNpYmxlKHYpIHsKICAgICAgaWYgKHYpIHsKICAgICAgICBpZiAodGhpcy5qb2JJRCkgewogICAgICAgICAgdGhpcy5mb3JtLmpvYl9faWQgPSB0aGlzLmpvYklEOwogICAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5mb3JtID0gdGhpcy4kb3B0aW9ucy5kYXRhKCkuZm9ybTsKICAgICAgdGhpcy4kZW1pdCgnZXhlY3V0aW9uRGlhbG9nQ2xvc2UnKTsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZ2V0Sm9iRXhlY3V0aW9ucyh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXMuZGF0YS5jb3VudDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6K+m5oOF5Zue5rqvRGlhbG9nCiAgICBkZXRhaWxzOiBmdW5jdGlvbiBkZXRhaWxzKHJvdykgewogICAgICB0aGlzLmVycm9yRGV0YWlscyA9IHJvdy50cmFjZWJhY2s7CiAgICAgIHRoaXMuZGV0YWlsc0RpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWIhumhtQogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5mb3JtLnNpemUgPSB2YWw7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5mb3JtLnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getJobExecutions","name","props","executionDialogVisible","type","Boolean","default","jobID","String","data","form","page","size","search","job__id","tableData","total","detailsDialogVisible","errorDetails","watch","v","methods","close","$options","$emit","_this","then","res","results","count","details","row","traceback","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/system/jobs/components/executionDialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog title=\"执行记录\" :visible.sync=\"executionDialogVisible\" :before-close=\"close\">\r\n    <el-table :data=\"tableData\">\r\n      <el-table-column property=\"status\" label=\"状态\" width=\"150\" />\r\n      <el-table-column property=\"run_time\" label=\"执行时间\" width=\"200\" />\r\n      <el-table-column property=\"duration\" label=\"耗时(s)\" />\r\n      <el-table-column property=\"exception\" label=\"异常\" show-overflow-tooltip />\r\n      <el-table-column label=\"详情回溯\">\r\n        <template slot-scope=\"{row}\">\r\n          <el-link v-if=\"row.traceback\" type=\"danger\" @click=\"details(row)\">详情回溯</el-link>\r\n          <el-dialog append-to-body title=\"详情回溯\" :visible.sync=\"detailsDialogVisible\">\r\n            <pre class=\"details\">{{ errorDetails }}</pre>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--分页组件-->\r\n    <el-pagination\r\n      :current-page=\"1\"\r\n      :page-sizes=\"[10, 20, 50, 100]\"\r\n      :page-size=\"10\"\r\n      :total=\"total\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n    />\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getJobExecutions } from '@/api/system/jobs'\r\nexport default {\r\n  name: 'ExecutionDialog',\r\n  props: {\r\n    executionDialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    jobID: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: '',\r\n        job__id: ''\r\n      },\r\n      tableData: [],\r\n      total: 0,\r\n      detailsDialogVisible: false,\r\n      errorDetails: ''\r\n    }\r\n  },\r\n  watch: {\r\n    executionDialogVisible(v) {\r\n      if (v) {\r\n        if (this.jobID) {\r\n          this.form.job__id = this.jobID\r\n          this.search()\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.form = this.$options.data().form\r\n      this.$emit('executionDialogClose')\r\n    },\r\n    search() {\r\n      getJobExecutions(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 详情回溯Dialog\r\n    details(row) {\r\n      this.errorDetails = row.traceback\r\n      this.detailsDialogVisible = true\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\npre{\r\n  white-space:pre-wrap;\r\n  word-wrap: break-word\r\n};\r\n.errorPre{\r\n  height: 60vh;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,SAAAA,gBAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,sBAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,IAAA;QACAC,IAAA;QACAC,MAAA;QACAC,OAAA;MACA;MACAC,SAAA;MACAC,KAAA;MACAC,oBAAA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACAhB,sBAAA,WAAAA,uBAAAiB,CAAA;MACA,IAAAA,CAAA;QACA,SAAAb,KAAA;UACA,KAAAG,IAAA,CAAAI,OAAA,QAAAP,KAAA;UACA,KAAAM,MAAA;QACA;MACA;IACA;EACA;EACAQ,OAAA;IACAC,KAAA,WAAAA,MAAA;MACA,KAAAZ,IAAA,QAAAa,QAAA,CAAAd,IAAA,GAAAC,IAAA;MACA,KAAAc,KAAA;IACA;IACAX,MAAA,WAAAA,OAAA;MAAA,IAAAY,KAAA;MACAzB,gBAAA,MAAAU,IAAA,EAAAgB,IAAA,WAAAC,GAAA;QACAF,KAAA,CAAAV,SAAA,GAAAY,GAAA,CAAAlB,IAAA,CAAAmB,OAAA;QACAH,KAAA,CAAAT,KAAA,GAAAW,GAAA,CAAAlB,IAAA,CAAAoB,KAAA;MACA;IACA;IACA;IACAC,OAAA,WAAAA,QAAAC,GAAA;MACA,KAAAb,YAAA,GAAAa,GAAA,CAAAC,SAAA;MACA,KAAAf,oBAAA;IACA;IACA;IACAgB,gBAAA,WAAAA,iBAAAC,GAAA;MACA,KAAAxB,IAAA,CAAAE,IAAA,GAAAsB,GAAA;MACA,KAAArB,MAAA;IACA;IACAsB,mBAAA,WAAAA,oBAAAD,GAAA;MACA,KAAAxB,IAAA,CAAAC,IAAA,GAAAuB,GAAA;MACA,KAAArB,MAAA;IACA;EACA;AACA"}]}