{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\components\\cuForm.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\components\\cuForm.vue","mtime":1695288475463},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXIsIHVwZGF0ZVVzZXIsIGNyZWF0ZVVzZXIgfSBmcm9tICdAL2FwaS9zeXN0ZW0vdXNlcnMnOwppbXBvcnQgeyBnZXRSb2xlcyBhcyBfZ2V0Um9sZXMgfSBmcm9tICdAL2FwaS9zeXN0ZW0vcm9sZXMnOwppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCc7CmltcG9ydCAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0N1Rm9ybScsCiAgY29tcG9uZW50czogewogICAgVHJlZXNlbGVjdDogVHJlZXNlbGVjdAogIH0sCiAgcHJvcHM6IHsKICAgIGRpYWxvZ1Zpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBjdXJJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkZXBhcnRtZW50c0RhdGE6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIG1vYmlsZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIGRlcGFydG1lbnQ6IG51bGwsCiAgICAgICAgcm9sZXM6IG51bGwKICAgICAgfSwKICAgICAgcm9sZXNEYXRhOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+WQjeS4jeiDveS4uuepuicKICAgICAgICB9XSwKICAgICAgICBtb2JpbGU6IFt7CiAgICAgICAgICBwYXR0ZXJuOiAvXjFbMy05XVxkezl9JC8sCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3JwogICAgICAgIH1dLAogICAgICAgIGVtYWlsOiBbewogICAgICAgICAgdHlwZTogJ2VtYWlsJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmraPnoa7nmoTpgq7nrrHlnLDlnYAnLAogICAgICAgICAgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBkaWFsb2dWaXNpYmxlOiBmdW5jdGlvbiBkaWFsb2dWaXNpYmxlKHYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHYpIHsKICAgICAgICBpZiAodGhpcy5jdXJJZCkgewogICAgICAgICAgLy8g57yW6L6RCiAgICAgICAgICAvLyB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAvLyAgIGdldFVzZXIodGhpcy5jdXJJZCkudGhlbihyZXMgPT4gewogICAgICAgICAgLy8gICAgIHRoaXMucnVsZUZvcm0gPSByZXMuZGF0YQogICAgICAgICAgLy8gICB9KQogICAgICAgICAgLy8gfSkKICAgICAgICAgIGdldFVzZXIodGhpcy5jdXJJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLnJ1bGVGb3JtID0gcmVzLmRhdGE7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5nZXRSb2xlcygpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB0aGlzLiRlbWl0KCdzZWFyY2gnKTsKICAgIH0sCiAgICBnZXRSb2xlczogZnVuY3Rpb24gZ2V0Um9sZXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBfZ2V0Um9sZXMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIucm9sZXNEYXRhID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q5Lqk6KGo5Y2VCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczMuY3VySWQpIHsKICAgICAgICAgICAgaWYgKCFfdGhpczMucnVsZUZvcm0uZGVwYXJ0bWVudCkgewogICAgICAgICAgICAgIF90aGlzMy5ydWxlRm9ybS5kZXBhcnRtZW50ID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVVc2VyKF90aGlzMy5jdXJJZCwgX3RoaXMzLnJ1bGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpczMuc2VhcmNoKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3JlYXRlVXNlcihfdGhpczMucnVsZUZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5paw5aKe5oiQ5YqfLCDpu5jorqTlr4bnoIExMjM0NTYnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMzLnNlYXJjaCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfTs="},{"version":3,"names":["getUser","updateUser","createUser","getRoles","Treeselect","name","components","props","dialogVisible","type","Boolean","default","curId","Number","departmentsData","Array","_default","data","ruleForm","username","mobile","email","department","roles","rolesData","rules","required","trigger","message","pattern","watch","v","_this","then","res","methods","close","$refs","resetFields","$emit","search","_this2","results","submitForm","formName","_this3","validate","valid","$message","console","log","resetForm"],"sources":["src/views/system/users/components/cuForm.vue"],"sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"dialogVisible\" :title=\"curId ? '编辑用户' : '新增用户'\" width=\"700px\" :before-close=\"close\">\r\n    <el-form ref=\"ruleForm\" label-position=\"left  \" :model=\"ruleForm\" status-icon :rules=\"rules\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n      <el-form-item label=\"用户名\" prop=\"username\">\r\n        <el-input v-model=\"ruleForm.username\" clearable autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"姓名\" prop=\"name\">\r\n        <el-input v-model=\"ruleForm.name\" clearable autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号\" prop=\"mobile\">\r\n        <el-input v-model=\"ruleForm.mobile\" clearable autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"ruleForm.email\" clearable autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"部门\" prop=\"department\">\r\n        <treeselect\r\n          v-model=\"ruleForm.department\"\r\n          :options=\"departmentsData\"\r\n          style=\"width: 178px\"\r\n          placeholder=\"选择部门\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"角色\" prop=\"roles\">\r\n        <el-select v-model=\"ruleForm.roles\" multiple placeholder=\"选择角色\">\r\n          <el-option\r\n            v-for=\"item in rolesData\"\r\n            :key=\"item.name\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getUser, updateUser, createUser } from '@/api/system/users'\r\nimport { getRoles } from '@/api/system/roles'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nexport default {\r\n  name: 'CuForm',\r\n  components: { Treeselect },\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    curId: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n    departmentsData: {\r\n      type: Array,\r\n      default: () => {\r\n        return\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        username: '',\r\n        name: '',\r\n        mobile: '',\r\n        email: '',\r\n        department: null,\r\n        roles: null\r\n      },\r\n      rolesData: [],\r\n      rules: {\r\n        username: [{ required: true, trigger: 'blur', message: '用户名不能为空' }],\r\n        mobile: [{ pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号' }],\r\n        email: [{ type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    dialogVisible(v) {\r\n      if (v) {\r\n        if (this.curId) {\r\n          // 编辑\r\n        // this.$nextTick(() => {\r\n        //   getUser(this.curId).then(res => {\r\n        //     this.ruleForm = res.data\r\n        //   })\r\n        // })\r\n          getUser(this.curId).then(res => {\r\n            this.ruleForm = res.data\r\n          })\r\n        }\r\n        this.getRoles()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$refs.ruleForm.resetFields()\r\n      this.$emit('close')\r\n    },\r\n    search() {\r\n      this.close()\r\n      this.$emit('search')\r\n    },\r\n    getRoles() {\r\n      getRoles().then(res => {\r\n        this.rolesData = res.data.results\r\n      })\r\n    },\r\n    // 提交表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (this.curId) {\r\n            if (!this.ruleForm.department) {\r\n              this.ruleForm.department = null\r\n            }\r\n            updateUser(this.curId, this.ruleForm).then(res => {\r\n              this.$message({\r\n                message: '修改成功',\r\n                type: 'success'\r\n              })\r\n              this.search()\r\n            })\r\n          } else {\r\n            createUser(this.ruleForm).then(res => {\r\n              this.$message({\r\n                message: '新增成功, 默认密码123456',\r\n                type: 'success'\r\n              })\r\n              this.search()\r\n            })\r\n          }\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAAAA,OAAA,EAAAC,UAAA,EAAAC,UAAA;AACA,SAAAC,QAAA,IAAAA,SAAA;AACA,OAAAC,UAAA;AACA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF,UAAA,EAAAA;EAAA;EACAG,KAAA;IACAC,aAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAG,eAAA;MACAL,IAAA,EAAAM,KAAA;MACAJ,OAAA,WAAAK,SAAA;QACA;MACA;IACA;EAEA;EAEAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;QACAC,QAAA;QACAd,IAAA;QACAe,MAAA;QACAC,KAAA;QACAC,UAAA;QACAC,KAAA;MACA;MACAC,SAAA;MACAC,KAAA;QACAN,QAAA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAR,MAAA;UAAAS,OAAA;UAAAD,OAAA;QAAA;QACAP,KAAA;UAAAZ,IAAA;UAAAmB,OAAA;UAAAD,OAAA;QAAA;MACA;IACA;EACA;EACAG,KAAA;IACAtB,aAAA,WAAAA,cAAAuB,CAAA;MAAA,IAAAC,KAAA;MACA,IAAAD,CAAA;QACA,SAAAnB,KAAA;UACA;UACA;UACA;UACA;UACA;UACA;UACAZ,OAAA,MAAAY,KAAA,EAAAqB,IAAA,WAAAC,GAAA;YACAF,KAAA,CAAAd,QAAA,GAAAgB,GAAA,CAAAjB,IAAA;UACA;QACA;QACA,KAAAd,QAAA;MACA;IACA;EACA;EACAgC,OAAA;IACAC,KAAA,WAAAA,MAAA;MACA,KAAAC,KAAA,CAAAnB,QAAA,CAAAoB,WAAA;MACA,KAAAC,KAAA;IACA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAAJ,KAAA;MACA,KAAAG,KAAA;IACA;IACApC,QAAA,WAAAA,SAAA;MAAA,IAAAsC,MAAA;MACAtC,SAAA,GAAA8B,IAAA,WAAAC,GAAA;QACAO,MAAA,CAAAjB,SAAA,GAAAU,GAAA,CAAAjB,IAAA,CAAAyB,OAAA;MACA;IACA;IACA;IACAC,UAAA,WAAAA,WAAAC,QAAA;MAAA,IAAAC,MAAA;MACA,KAAAR,KAAA,CAAAO,QAAA,EAAAE,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA,IAAAF,MAAA,CAAAjC,KAAA;YACA,KAAAiC,MAAA,CAAA3B,QAAA,CAAAI,UAAA;cACAuB,MAAA,CAAA3B,QAAA,CAAAI,UAAA;YACA;YACArB,UAAA,CAAA4C,MAAA,CAAAjC,KAAA,EAAAiC,MAAA,CAAA3B,QAAA,EAAAe,IAAA,WAAAC,GAAA;cACAW,MAAA,CAAAG,QAAA;gBACApB,OAAA;gBACAnB,IAAA;cACA;cACAoC,MAAA,CAAAL,MAAA;YACA;UACA;YACAtC,UAAA,CAAA2C,MAAA,CAAA3B,QAAA,EAAAe,IAAA,WAAAC,GAAA;cACAW,MAAA,CAAAG,QAAA;gBACApB,OAAA;gBACAnB,IAAA;cACA;cACAoC,MAAA,CAAAL,MAAA;YACA;UACA;QACA;UACAS,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACAC,SAAA,WAAAA,UAAAP,QAAA;MACA,KAAAP,KAAA,CAAAO,QAAA,EAAAN,WAAA;IACA;EACA;AACA"}]}