{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\information\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\information\\index.vue","mtime":1695288475457},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovRGVza3RvcC9EamFuZ28vZmVfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBteVVwbG9hZCBmcm9tICd2dWUtaW1hZ2UtY3JvcC11cGxvYWQnOwppbXBvcnQgdXBkYXRlUGFzcyBmcm9tICcuL2NvbXBvbmVudHMvdXBkYXRlUGFzcyc7CmltcG9ydCB7IHZhbGlkYXRlUGhvbmUsIHZhbGlkYXRlRU1haWwgfSBmcm9tICdAL3V0aWxzL3J1bGVzVmFsaWRhdGUnOwppbXBvcnQgeyBjaGFuZ2VJbmZvcm1hdGlvbiB9IGZyb20gJ0AvYXBpL2luZm9ybWF0aW9uL2NlbnRyZSc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2VudHJlJywKICBjb21wb25lbnRzOiB7CiAgICB1cGRhdGVQYXNzOiB1cGRhdGVQYXNzLAogICAgbXlVcGxvYWQ6IG15VXBsb2FkCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGdldFRva2VuKCkKICAgICAgfSwKICAgICAgZm9ybToge30sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIG1pbjogMiwKICAgICAgICAgIG1heDogMjAsCiAgICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDIg5YiwIDIwIOS4quWtl+espicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBlbWFpbDogW3sKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFTWFpbCwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIG1vYmlsZTogW3sKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQaG9uZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHVwZGF0ZUF2YXRhckFwaTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArICcvaW5mb3JtYXRpb24vY2hhbmdlLWF2YXRhci8nCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWyd1c2VybmFtZScsICdkZXBhcnRtZW50JywgJ25hbWUnLCAnYXZhdGFyJywgJ21vYmlsZScsICdlbWFpbCddKSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZm9ybSA9IHsKICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICBtb2JpbGU6IHRoaXMubW9iaWxlLAogICAgICBlbWFpbDogdGhpcy5lbWFpbAogICAgfTsKICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZm8nKS50aGVuKGZ1bmN0aW9uICgpIHt9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZVNob3c6IGZ1bmN0aW9uIHRvZ2dsZVNob3coKSB7CiAgICAgIHRoaXMuc2hvdyA9ICF0aGlzLnNob3c7CiAgICB9LAogICAgLy8g5aS05YOP5LiK5Lyg5oiQ5Yqf55qE5Zue6LCDCiAgICBjcm9wVXBsb2FkU3VjY2VzczogZnVuY3Rpb24gY3JvcFVwbG9hZFN1Y2Nlc3MoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZm8nKS50aGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICAvLyDkv67mlLnkuKrkurrkv6Hmga8KICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIC8vICAgaWYgKHRoaXMuZm9ybS5tb2JpbGUgPT09ICcnKSB7CiAgICAgICAgICAvLyAgICAgdGhpcy5mb3JtLm1vYmlsZSA9IG51bGwKICAgICAgICAgIC8vICAgfQogICAgICAgICAgY2hhbmdlSW5mb3JtYXRpb24oX3RoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZm8nKS50aGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["myUpload","updatePass","validatePhone","validateEMail","changeInformation","mapGetters","store","getToken","name","components","data","show","headers","form","rules","min","max","message","trigger","email","validator","mobile","updateAvatarApi","process","env","VUE_APP_BASE_API","computed","_objectSpread","created","dispatch","then","methods","toggleShow","cropUploadSuccess","onSubmit","formName","_this","$refs","validate","valid","res","$message","type"],"sources":["src/views/information/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col :span=\"6\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>个人信息</span>\r\n          </div>\r\n          <div>\r\n            <div style=\"text-align: center\">\r\n              <div class=\"el-upload\">\r\n                <img :src=\"avatar\" title=\"点击上传头像\" class=\"avatar\" @click=\"toggleShow\">\r\n                <myUpload\r\n                  v-model=\"show\"\r\n                  :headers=\"headers\"\r\n                  :url=\"updateAvatarApi\"\r\n                  method=\"PUT\"\r\n                  field=\"image\"\r\n                  @crop-upload-success=\"cropUploadSuccess\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <ul class=\"user-info\">\r\n              <li><div style=\"height: 100%\"><svg-icon icon-class=\"login\" /> 登录账号<div class=\"user-right\">{{ username }}</div></div></li>\r\n              <li><svg-icon icon-class=\"user1\" /> 用户姓名 <div class=\"user-right\">{{ name }}</div></li>\r\n              <li><svg-icon icon-class=\"dept\" /> 所属部门 <div class=\"user-right\"> {{ department }}</div></li>\r\n              <li><svg-icon icon-class=\"phone\" /> 手机号码 <div class=\"user-right\">{{ mobile }}</div></li>\r\n              <li><svg-icon icon-class=\"email\" /> 用户邮箱 <div class=\"user-right\">{{ email }}</div></li>\r\n              <li>\r\n                <svg-icon icon-class=\"anq\" /> 安全设置\r\n                <div class=\"user-right\">\r\n                  <a @click=\"$refs.pass.dialogVisible = true\">修改密码</a>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"18\">\r\n        <el-card class=\"box-card\" style=\"margin-left: 20px;\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>个人信息</span>\r\n          </div>\r\n          <div>\r\n            <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"80px\">\r\n              <el-form-item label=\"姓名\" prop=\"name\">\r\n                <el-input v-model=\"form.name\" style=\"width: 40%\" />\r\n                <span style=\"color: #C0C0C0;margin-left: 10px;\">用户真实姓名或昵称</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\" prop=\"mobile\">\r\n                <el-input v-model=\"form.mobile\" style=\"width: 40%\" />\r\n                <span style=\"color: #C0C0C0;margin-left: 10px;\">手机号可用于登录使用</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model=\"form.email\" style=\"width: 40%\" />\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit('form')\">保存配置</el-button>\r\n              </el-form-item>\r\n            </el-form></div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <updatePass ref=\"pass\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport myUpload from 'vue-image-crop-upload'\r\nimport updatePass from './components/updatePass'\r\nimport { validatePhone, validateEMail } from '@/utils/rulesValidate'\r\nimport { changeInformation } from '@/api/information/centre'\r\nimport { mapGetters } from 'vuex'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\nexport default {\r\n  name: 'Centre',\r\n  components: { updatePass, myUpload },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      headers: {\r\n        'Authorization': 'Bearer ' + getToken()\r\n      },\r\n      form: {},\r\n      rules: {\r\n        name: [\r\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { validator: validateEMail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { validator: validatePhone, trigger: 'blur' }\r\n        ]\r\n      },\r\n      updateAvatarApi: process.env.VUE_APP_BASE_API + '/information/change-avatar/'\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'username',\r\n      'department',\r\n      'name',\r\n      'avatar',\r\n      'mobile',\r\n      'email'\r\n    ])\r\n  },\r\n  created() {\r\n    this.form = { name: this.name, mobile: this.mobile, email: this.email }\r\n    store.dispatch('user/getInfo').then(() => {})\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show\r\n    },\r\n    // 头像上传成功的回调\r\n    cropUploadSuccess() {\r\n      store.dispatch('user/getInfo').then(() => {})\r\n    },\r\n    // 修改个人信息\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n        //   if (this.form.mobile === '') {\r\n        //     this.form.mobile = null\r\n        //   }\r\n          changeInformation(this.form).then(res => {\r\n            this.$message({\r\n              message: '修改成功',\r\n              type: 'success'\r\n            })\r\n            store.dispatch('user/getInfo').then(() => {})\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n  .avatar {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n  }\r\n  .user-info {\r\n    padding-left: 0;\r\n    list-style: none;\r\n    li{\r\n      border-bottom: 1px solid #F0F3F4;\r\n      padding: 11px 0;\r\n      font-size: 13px;\r\n    }\r\n    .user-right {\r\n      float: right;\r\n      a{\r\n        color: #317EF3;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,OAAAA,QAAA;AACA,OAAAC,UAAA;AACA,SAAAC,aAAA,EAAAC,aAAA;AACA,SAAAC,iBAAA;AACA,SAAAC,UAAA;AACA,OAAAC,KAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAR,UAAA,EAAAA,UAAA;IAAAD,QAAA,EAAAA;EAAA;EACAU,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;QACA,6BAAAL,QAAA;MACA;MACAM,IAAA;MACAC,KAAA;QACAN,IAAA,GACA;UAAAO,GAAA;UAAAC,GAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAC,KAAA,GACA;UAAAC,SAAA,EAAAjB,aAAA;UAAAe,OAAA;QAAA,EACA;QACAG,MAAA,GACA;UAAAD,SAAA,EAAAlB,aAAA;UAAAgB,OAAA;QAAA;MAEA;MACAI,eAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;IACA;EACA;EACAC,QAAA,EAAAC,aAAA,KACAtB,UAAA,EACA,YACA,cACA,QACA,UACA,UACA,QACA,EACA;EACAuB,OAAA,WAAAA,QAAA;IACA,KAAAf,IAAA;MAAAL,IAAA,OAAAA,IAAA;MAAAa,MAAA,OAAAA,MAAA;MAAAF,KAAA,OAAAA;IAAA;IACAb,KAAA,CAAAuB,QAAA,iBAAAC,IAAA;EACA;EACAC,OAAA;IACAC,UAAA,WAAAA,WAAA;MACA,KAAArB,IAAA,SAAAA,IAAA;IACA;IACA;IACAsB,iBAAA,WAAAA,kBAAA;MACA3B,KAAA,CAAAuB,QAAA,iBAAAC,IAAA;IACA;IACA;IACAI,QAAA,WAAAA,SAAAC,QAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAF,QAAA,EAAAG,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA;UACA;UACAnC,iBAAA,CAAAgC,KAAA,CAAAvB,IAAA,EAAAiB,IAAA,WAAAU,GAAA;YACAJ,KAAA,CAAAK,QAAA;cACAxB,OAAA;cACAyB,IAAA;YACA;YACApC,KAAA,CAAAuB,QAAA,iBAAAC,IAAA;UACA;QACA;MACA;IACA;EACA;AACA"}]}