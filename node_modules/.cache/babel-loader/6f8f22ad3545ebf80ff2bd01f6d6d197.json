{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Desktop\\Django\\fe_admin\\src\\permission.js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\permission.js","mtime":1695288475445},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\eslint-loader\\index.js","mtime":1698226179382}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovRGVza3RvcC9EamFuZ28vZmVfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L0Rlc2t0b3AvRGphbmdvL2ZlX2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0Rlc2t0b3AvRGphbmdvL2ZlX2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsgLy8gZ2V0IHRva2VuIGZyb20gY29va2llCmltcG9ydCBnZXRQYWdlVGl0bGUgZnJvbSAnQC91dGlscy9nZXQtcGFnZS10aXRsZSc7Ck5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KCnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbiddOyAvLyBubyByZWRpcmVjdCB3aGl0ZWxpc3QKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaGFzVG9rZW4sIGhhc1VzZXJJZHMsIGFjY2Vzc1JvdXRlczsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIC8vIHN0YXJ0IHByb2dyZXNzIGJhcgogICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CgogICAgICAgICAgLy8gc2V0IHBhZ2UgdGl0bGUKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZ2V0UGFnZVRpdGxlKHRvLm1ldGEudGl0bGUpOwoKICAgICAgICAgIC8vIOehruWumueUqOaIt+aYr+WQpuW3sueZu+W9lQogICAgICAgICAgaGFzVG9rZW4gPSBnZXRUb2tlbigpOwogICAgICAgICAgaWYgKCFoYXNUb2tlbikgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCEodG8ucGF0aCA9PT0gJy9sb2dpbicpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOWmguaenOW3sueZu+W9le+8jOivt+mHjeWumuWQkeWIsOS4u+mhtQogICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgfSk7CiAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOyAvLyBoYWNrOiBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9wdWxsLzI5MzkKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgOToKICAgICAgICAgIC8vIOWIpOaWreW9k+WJjeeUqOaIt+aYr+WQpuW3suaLieWPluWujHVzZXJfaW5mb+S/oeaBrwogICAgICAgICAgaGFzVXNlcklkcyA9IHN0b3JlLmdldHRlcnMudXNlcklkICYmIHN0b3JlLmdldHRlcnMudXNlcklkID4gMDsKICAgICAgICAgIGlmICghaGFzVXNlcklkcykgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgbmV4dCgpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI5OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycpOwogICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgLy8g5Yqo5oCB5re75Yqg5Y+v6K6/6Zeu55qE6Lev57q/CiAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcyk7CgogICAgICAgICAgLy8gaGFja+aWueazleS7peehruS/nWFkZFJvdXRlc+aYr+WujOaVtOeahAogICAgICAgICAgLy8g6K6+572ucmVwbGFjZe+8mnRydWXvvIzlm6DmraTlr7zoiKrkuI3kvJrnlZnkuIvljoblj7LorrDlvZUKICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgIH0pKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjI7CiAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDE0KTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNjsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJyk7CiAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoX2NvbnRleHQudDAgfHwgJ0hhcyBFcnJvcicpOwogICAgICAgICAgbmV4dCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgY2FzZSAyOToKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAvKiBoYXMgbm8gdG9rZW4qLwoKICAgICAgICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKICAgICAgICAgICAgLy8g5Zyo5YWN55m75b2V55m95ZCN5Y2V5Lit77yM55u05o6l6L+b5YWlCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOWFtuS7luaXoOadg+iuv+mXrueahOmhtemdouWwhuiiq+mHjeWumuWQkeWIsOeZu+W9lemhtemdogogICAgICAgICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgfQogICAgICAgIGNhc2UgMzI6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTQsIDIyXV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyDlrozmiJDov5vluqbmoI8KICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTs="},{"version":3,"names":["router","store","Message","NProgress","getToken","getPageTitle","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","hasToken","hasUserIds","accessRoutes","wrap","_callee$","_context","prev","start","document","title","meta","path","done","getters","userId","dispatch","sent","addRoutes","_objectSpread","replace","t0","error","concat","indexOf","stop","_x","_x2","_x3","apply","arguments","afterEach"],"sources":["D:/Desktop/Django/fe_admin/src/permission.js"],"sourcesContent":["import router from './router'\r\nimport store from './store'\r\nimport { Message } from 'element-ui'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport { getToken } from '@/utils/auth' // get token from cookie\r\nimport getPageTitle from '@/utils/get-page-title'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // start progress bar\r\n  NProgress.start()\r\n\r\n  // set page title\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  // 确定用户是否已登录\r\n  const hasToken = getToken()\r\n\r\n  if (hasToken) {\r\n    // 已登录且要跳转的页面是登录页\r\n    if (to.path === '/login') {\r\n      // 如果已登录，请重定向到主页\r\n      next({ path: '/' })\r\n      NProgress.done() // hack: https://github.com/PanJiaChen/vue-element-admin/pull/2939\r\n    } else {\r\n      // 判断当前用户是否已拉取完user_info信息\r\n      const hasUserIds = store.getters.userId && store.getters.userId > 0\r\n      if (hasUserIds) {\r\n        next()\r\n      } else {\r\n        try {\r\n          // 生成可访问的路线图\r\n          const accessRoutes = await store.dispatch('permission/generateRoutes')\r\n\r\n          // 动态添加可访问的路线\r\n          router.addRoutes(accessRoutes)\r\n\r\n          // hack方法以确保addRoutes是完整的\r\n          // 设置replace：true，因此导航不会留下历史记录\r\n          next({ ...to, replace: true })\r\n        } catch (error) {\r\n          // 删除token并进入登录页面重新登录\r\n          await store.dispatch('user/resetToken')\r\n          Message.error(error || 'Has Error')\r\n          next(`/login?redirect=${to.path}`)\r\n          NProgress.done()\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    /* has no token*/\r\n\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // 在免登录白名单中，直接进入\r\n      next()\r\n    } else {\r\n      // 其他无权访问的页面将被重定向到登录页面\r\n      next(`/login?redirect=${to.path}`)\r\n      NProgress.done()\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // 完成进度栏\r\n  NProgress.done()\r\n})\r\n"],"mappings":"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"}]}