{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\monitor\\error\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\monitor\\error\\index.vue","mtime":1695288475459},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRlbGV0ZUVycm9yTG9ncywgZ2V0RXJyb3JMb2dzIH0gZnJvbSAnQC9hcGkvbW9uaXRvci9lcnJvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXNlcnMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiAxMCwKICAgICAgICBzZWFyY2g6ICcnCiAgICAgIH0sCiAgICAgIGVycm9yRGV0YWlsczogJycsCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc2VhcmNoKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bplJnor6/ml6Xlv5fliJfooagv5pCc57Si5Yqf6IO9CiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZ2V0RXJyb3JMb2dzKHRoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICB9KTsKICAgIH0sCiAgICAvLyDph43nva4KICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5zZWFyY2goKTsKICAgIH0sCiAgICAvLyDmuIXnqbrplJnor6/ml6Xlv5cKICAgIGRlbGV0ZUxvZ3M6IGZ1bmN0aW9uIGRlbGV0ZUxvZ3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmuIXnqbrmiYDmnInplJnor6/ml6Xlv5fkv6Hmga8gLCDmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlRXJyb3JMb2dzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5riF56m65oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMi5zZWFyY2goKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6ZSZ6K+v6K+m5oOFZGlhbG9n5pi+56S6CiAgICBkaWFsb2dWaXNpYmxlOiBmdW5jdGlvbiBkaWFsb2dWaXNpYmxlKHJvdykgewogICAgICB0aGlzLmVycm9yRGV0YWlscyA9IHJvdy5kZXRhaWw7CiAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDliIbpobUKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybS5zaXplID0gdmFsOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybS5wYWdlID0gdmFsOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["deleteErrorLogs","getErrorLogs","name","data","form","page","size","search","errorDetails","dialogTableVisible","tableData","total","created","methods","_this","then","res","results","count","resetForm","$refs","resetFields","deleteLogs","_this2","$confirm","confirmButtonText","cancelButtonText","type","$message","message","dialogVisible","row","detail","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/monitor/error/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col>\r\n        <el-form ref=\"form\" :model=\"form\" inline>\r\n          <el-form-item prop=\"search\">\r\n            <el-input v-model=\"form.search\" clearable style=\"width:300px\" prefix-icon=\"el-icon-search\" placeholder=\"输入内容搜索\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"success\" icon=\"el-icon-search\" size=\"medium\" @click=\"search(form)\">搜索</el-button>\r\n            <el-button type=\"warning\" icon=\"el-icon-refresh-left\" size=\"medium\" @click=\"resetForm()\">重置</el-button>\r\n            <el-button v-permission=\"['admin','monitor-error-clear']\" type=\"danger\" icon=\"el-icon-delete\" size=\"medium\" @click=\"deleteLogs()\">清空日志</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column\r\n            type=\"index\"\r\n            width=\"50\"\r\n          />\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"用户名\"\r\n          />\r\n          <el-table-column\r\n            prop=\"ip\"\r\n            label=\"IP\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            prop=\"view\"\r\n            label=\"视图\"\r\n          />\r\n          <el-table-column\r\n            prop=\"desc\"\r\n            label=\"描述\"\r\n            show-overflow-tooltip\r\n          />\r\n          <el-table-column\r\n            prop=\"create_time\"\r\n            label=\"错误时间\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            align=\"center\"\r\n            label=\"操作\"\r\n            width=\"220\"\r\n          >\r\n            <template slot-scope=\"{row}\">\r\n              <el-button type=\"text\" size=\"mini\" @click=\"dialogVisible(row)\">错误详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!--分页组件-->\r\n        <el-pagination\r\n          :current-page=\"1\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"10\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog title=\"错误详情\" :visible.sync=\"dialogTableVisible\">\r\n      <pre class=\"errorPre\">{{ errorDetails }}</pre>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deleteErrorLogs, getErrorLogs } from '@/api/monitor/error'\r\nexport default {\r\n  name: 'Users',\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: ''\r\n      },\r\n      errorDetails: '',\r\n      dialogTableVisible: false,\r\n      tableData: [],\r\n      total: 0\r\n    }\r\n  },\r\n  created() {\r\n    this.search()\r\n  },\r\n  methods: {\r\n    // 获取错误日志列表/搜索功能\r\n    search() {\r\n      getErrorLogs(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 重置\r\n    resetForm() {\r\n      this.$refs.form.resetFields()\r\n      this.search()\r\n    },\r\n    // 清空错误日志\r\n    deleteLogs() {\r\n      this.$confirm('此操作将清空所有错误日志信息 , 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteErrorLogs().then(res => {\r\n          this.$message({\r\n            message: '清空成功',\r\n            type: 'success'\r\n          })\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n    // 错误详情dialog显示\r\n    dialogVisible(row) {\r\n      this.errorDetails = row.detail\r\n      this.dialogTableVisible = true\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\npre{\r\n  white-space:pre-wrap;\r\n  word-wrap: break-word\r\n};\r\n.errorPre{\r\n  height: 60vh;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA,SAAAA,eAAA,EAAAC,YAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,IAAA;QACAC,IAAA;QACAC,MAAA;MACA;MACAC,YAAA;MACAC,kBAAA;MACAC,SAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAL,MAAA;EACA;EACAM,OAAA;IACA;IACAN,MAAA,WAAAA,OAAA;MAAA,IAAAO,KAAA;MACAb,YAAA,MAAAG,IAAA,EAAAW,IAAA,WAAAC,GAAA;QACAF,KAAA,CAAAJ,SAAA,GAAAM,GAAA,CAAAb,IAAA,CAAAc,OAAA;QACAH,KAAA,CAAAH,KAAA,GAAAK,GAAA,CAAAb,IAAA,CAAAe,KAAA;MACA;IACA;IACA;IACAC,SAAA,WAAAA,UAAA;MACA,KAAAC,KAAA,CAAAhB,IAAA,CAAAiB,WAAA;MACA,KAAAd,MAAA;IACA;IACA;IACAe,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAZ,IAAA;QACAf,eAAA,GAAAe,IAAA,WAAAC,GAAA;UACAO,MAAA,CAAAK,QAAA;YACAC,OAAA;YACAF,IAAA;UACA;UACAJ,MAAA,CAAAhB,MAAA;QACA;MACA;IACA;IACA;IACAuB,aAAA,WAAAA,cAAAC,GAAA;MACA,KAAAvB,YAAA,GAAAuB,GAAA,CAAAC,MAAA;MACA,KAAAvB,kBAAA;IACA;IACA;IACAwB,gBAAA,WAAAA,iBAAAC,GAAA;MACA,KAAA9B,IAAA,CAAAE,IAAA,GAAA4B,GAAA;MACA,KAAA3B,MAAA;IACA;IACA4B,mBAAA,WAAAA,oBAAAD,GAAA;MACA,KAAA9B,IAAA,CAAAC,IAAA,GAAA6B,GAAA;MACA,KAAA3B,MAAA;IACA;EACA;AACA"}]}