{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\index.vue","mtime":1695288475464},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovRGVza3RvcC9EamFuZ28vZmVfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgY2hlY2tQZXJtaXNzaW9uIGZyb20gJ0AvdXRpbHMvcGVybWlzc2lvbic7CmltcG9ydCBjdUZvcm0gZnJvbSAnLi9jb21wb25lbnRzL2N1Rm9ybSc7CmltcG9ydCByZXNldFB3ZEZvcm0gZnJvbSAnLi9jb21wb25lbnRzL3Jlc2V0UHdkRm9ybSc7CmltcG9ydCBwZXJtaXNzaW9uc0RpYWxvZyBmcm9tICcuL2NvbXBvbmVudHMvcGVybWlzc2lvbnNEaWFsb2cnOwppbXBvcnQgeyBnZXRVc2VycywgdXBkYXRlVXNlckFjdGl2ZSwgZGVsZXRlVXNlciBhcyBfZGVsZXRlVXNlciwgZGVsZXRlVXNlcnMgYXMgX2RlbGV0ZVVzZXJzIH0gZnJvbSAnQC9hcGkvc3lzdGVtL3VzZXJzJzsKaW1wb3J0IHsgZ2V0RGVwYXJ0bWVudHMgYXMgX2dldERlcGFydG1lbnRzIH0gZnJvbSAnQC9hcGkvc3lzdGVtL2RlcGFydG1lbnRzJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VzZXJzJywKICBjb21wb25lbnRzOiB7CiAgICBjdUZvcm06IGN1Rm9ybSwKICAgIHJlc2V0UHdkRm9ybTogcmVzZXRQd2RGb3JtLAogICAgcGVybWlzc2lvbnNEaWFsb2c6IHBlcm1pc3Npb25zRGlhbG9nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAsCiAgICAgICAgc2VhcmNoOiAnJywKICAgICAgICBpc19hY3RpdmU6ICcnLAogICAgICAgIG9yZGVyaW5nOiAnaWQnLAogICAgICAgIGRlcGFydG1lbnRfaWQ6ICcnCiAgICAgIH0sCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIC8vIOW3sumAieaLqeeahOeUqOaIt2lk5pWw57uECiAgICAgIGZpbHRlclRleHQ6ICcnLAogICAgICBkZXBhcnRtZW50c0RhdGE6IFtdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ2xhYmVsJwogICAgICB9LAogICAgICAvLyDku6XkuIvkuLpjdUZvcm3lrZDnu4Tku7bmlbDmja4KICAgICAgY3VEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgY3VySWQ6IG51bGwsCiAgICAgIC8vIOS7peS4i+S4unJlc2V0UHdkRm9ybeWtkOe7hOS7tuaVsOaNrgogICAgICByZXNldFBhc3NEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8gcGVybWlzc2lvbnNEaWFsb2flrZDnu4Tku7YKICAgICAgcGVybWlzc2lvbnNEaWFsb2dWaXNpYmxlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsndXNlcklkJ10pKSwKICB3YXRjaDogewogICAgZmlsdGVyVGV4dDogZnVuY3Rpb24gZmlsdGVyVGV4dCh2YWwpIHsKICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWwpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc2VhcmNoKCk7CiAgICB0aGlzLmdldERlcGFydG1lbnRzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Blcm1pc3Npb246IGNoZWNrUGVybWlzc2lvbiwKICAgIC8vIOiOt+WPlumDqOmXqFRyZWXnu5PmnoQKICAgIGdldERlcGFydG1lbnRzOiBmdW5jdGlvbiBnZXREZXBhcnRtZW50cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX2dldERlcGFydG1lbnRzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuZGVwYXJ0bWVudHNEYXRhID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YOo6ZeoVHJlZei/h+a7pOaWueazlQogICAgZmlsdGVyTm9kZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubGFiZWwuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgfSwKICAgIC8vIOi/h+a7pOmDqOmXqOS4i+eahOeUqOaIt+WIl+ihqAogICAgaGFuZGxlTm9kZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVOb2RlQ2xpY2soZGF0YSkgewogICAgICB0aGlzLmZvcm0uZGVwYXJ0bWVudF9pZCA9IGRhdGEuaWQ7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICB9LAogICAgLy8g6I635Y+W55So5oi35YiX6KGoL+aQnOe0ouWKn+iDvQogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBnZXRVc2Vycyh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi50YWJsZURhdGEgPSByZXMuZGF0YS5yZXN1bHRzOwogICAgICAgIF90aGlzMi50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICB9KTsKICAgIH0sCiAgICAvLyDph43nva4KICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgLy8gZm9ybeS4reacquS9v+eUqGRlcGFydG1lbnRfaWTlrZfmrrXpnIDmiYvliqjmuIXpmaQKICAgICAgdGhpcy5mb3JtLmRlcGFydG1lbnRfaWQgPSAnJzsKICAgICAgdGhpcy5zZWFyY2goKTsKICAgIH0sCiAgICAvLyDkv67mlLnnlKjmiLfnirbmgIEKICAgIGNoYW5nZUlzQWN0aXZlOiBmdW5jdGlvbiBjaGFuZ2VJc0FjdGl2ZShldmVudCwgcm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgbWVzc2FnZSA9ICFldmVudCA/ICfplIHlrponIDogJ+a/gOa0uyc7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhicgKyBtZXNzYWdlICsgJ+eUqOaItyAiJyArIHJvdy51c2VybmFtZSArICciICwg5piv5ZCm57un57ut77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgJ2lzX2FjdGl2ZSc6IHJvdy5pc19hY3RpdmUKICAgICAgICB9OwogICAgICAgIHVwZGF0ZVVzZXJBY3RpdmUocm93LmlkLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UgKyByb3cudXNlcm5hbWUgKyAn5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByb3cuaXNfYWN0aXZlID0gIXJvdy5pc19hY3RpdmU7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICByb3cuaXNfYWN0aXZlID0gIXJvdy5pc19hY3RpdmU7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOeUqOaItwogICAgZGVsZXRlVXNlcjogZnVuY3Rpb24gZGVsZXRlVXNlcihyb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWIoOmZpOeUqOaItyAiJyArIHJvdy51c2VybmFtZSArICciICwg5piv5ZCm57un57ut77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9kZWxldGVVc2VyKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk55So5oi3JyArIHJvdy51c2VybmFtZSArICfmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgICAgLy8g5Yi35pawdGFibGUKICAgICAgICAgIF90aGlzNC5zZWFyY2goKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gdGFibGXpgInmi6nlip/og73nmoRjaGFuZ2Xkuovku7YKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkgewogICAgICB2YXIgZGVsZXRlSWRzID0gW107CiAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5zZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBkZWxldGVJZHMucHVzaChkYXRhLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBkZWxldGVJZHM7CiAgICB9LAogICAgLy8g5om56YeP5Yig6Zmk55So5oi3CiAgICBkZWxldGVVc2VyczogZnVuY3Rpb24gZGVsZXRlVXNlcnMoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbliKDpmaTpgInkuK3nlKjmiLcnICsgJywg5piv5ZCm57un57ut77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9kZWxldGVVc2VycyhfdGhpczUubXVsdGlwbGVTZWxlY3Rpb24pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOeUqOaIt+aIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyDliLfmlrB0YWJsZQogICAgICAgICAgX3RoaXM1LnNlYXJjaCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliIbpobUKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybS5zaXplID0gdmFsOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybS5wYWdlID0gdmFsOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIC8vIGN1Rm9ybeWtkOe7hOS7tgogICAgY3JlYXRlVXNlcjogZnVuY3Rpb24gY3JlYXRlVXNlcigpIHsKICAgICAgdGhpcy5jdURpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIocm93KSB7CiAgICAgIHRoaXMuY3VySWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuY3VEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuY3VEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuY3VySWQgPSBudWxsOwogICAgfSwKICAgIC8vIOmHjee9ruWvhueggeWtkOe7hOS7tgogICAgcmVzZXRQYXNzOiBmdW5jdGlvbiByZXNldFBhc3Mocm93KSB7CiAgICAgIHRoaXMucmVzZXRQYXNzRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuY3VySWQgPSByb3cuaWQ7CiAgICB9LAogICAgcmVzZXRDbG9zZTogZnVuY3Rpb24gcmVzZXRDbG9zZSgpIHsKICAgICAgdGhpcy5yZXNldFBhc3NEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuY3VySWQgPSBudWxsOwogICAgfSwKICAgIC8vIOeUqOaIt+adg+mZkOe7hOS7tgogICAgdXNlclBlcm1pc3Npb25zOiBmdW5jdGlvbiB1c2VyUGVybWlzc2lvbnMocm93KSB7CiAgICAgIHRoaXMucGVybWlzc2lvbnNEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jdXJJZCA9IHJvdy5pZDsKICAgIH0sCiAgICBwZXJtaXNzaW9uc0Nsb3NlOiBmdW5jdGlvbiBwZXJtaXNzaW9uc0Nsb3NlKCkgewogICAgICB0aGlzLnBlcm1pc3Npb25zRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmN1cklkID0gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"names":["checkPermission","cuForm","resetPwdForm","permissionsDialog","getUsers","updateUserActive","deleteUser","deleteUsers","getDepartments","mapGetters","name","components","data","form","page","size","search","is_active","ordering","department_id","tableData","total","multipleSelection","filterText","departmentsData","defaultProps","children","label","cuDialogVisible","curId","resetPassDialogVisible","permissionsDialogVisible","computed","_objectSpread","watch","val","$refs","tree","filter","created","methods","_this","then","res","results","filterNode","value","indexOf","handleNodeClick","id","_this2","count","resetForm","resetFields","changeIsActive","event","row","_this3","message","$confirm","username","confirmButtonText","cancelButtonText","type","$message","catch","_this4","handleSelectionChange","deleteIds","multipleTable","selection","forEach","push","_this5","handleSizeChange","handleCurrentChange","createUser","updateUser","close","resetPass","resetClose","userPermissions","permissionsClose"],"sources":["src/views/system/users/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col :span=\"4\">\r\n        <el-input v-model=\"filterText\" clearable style=\"width:90%; margin-bottom: 20px;\" prefix-icon=\"el-icon-search\" placeholder=\"输入部门名称搜索\" />\r\n        <el-tree\r\n          ref=\"tree\"\r\n          class=\"filter-tree\"\r\n          :data=\"departmentsData\"\r\n          :props=\"defaultProps\"\r\n          :expand-on-click-node=\"false\"\r\n          :filter-node-method=\"filterNode\"\r\n          @node-click=\"handleNodeClick\"\r\n        />\r\n      </el-col>\r\n      <el-col :span=\"20\">\r\n        <el-form ref=\"form\" :model=\"form\" inline>\r\n          <el-form-item prop=\"search\">\r\n            <el-input v-model=\"form.search\" clearable style=\"width:300px\" prefix-icon=\"el-icon-search\" placeholder=\"输入用户名、姓名、手机号、邮箱搜索\" />\r\n          </el-form-item>\r\n          <el-form-item prop=\"is_active\">\r\n            <el-select v-model=\"form.is_active\" style=\"width:100px\" clearable placeholder=\"状态\">\r\n              <el-option label=\"激活\" value=\"true\" />\r\n              <el-option label=\"锁定\" value=\"false\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"success\" icon=\"el-icon-search\" size=\"medium\" @click=\"search(form)\">搜索</el-button>\r\n            <el-button type=\"warning\" icon=\"el-icon-refresh-left\" size=\"medium\" @click=\"resetForm()\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button v-permission=\"['admin','system-users-add']\" type=\"primary\" style=\"margin-bottom:20px\" icon=\"el-icon-plus\" size=\"medium\" @click=\"createUser()\">新增</el-button>\r\n        <el-button v-permission=\"['admin','system-users-mdel']\" type=\"danger\" icon=\"el-icon-delete\" :disabled=\"multipleSelection.length ? false : true\" size=\"medium\" @click=\"deleteUsers(form)\">删除</el-button>\r\n        <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\"\r\n          @selection-change=\"handleSelectionChange\"\r\n        >\r\n          <el-table-column\r\n            type=\"selection\"\r\n            width=\"55\"\r\n          />\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"用户名\"\r\n          />\r\n          <el-table-column\r\n            prop=\"name\"\r\n            label=\"姓名\"\r\n          />\r\n          <el-table-column\r\n            prop=\"mobile\"\r\n            label=\"电话\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            prop=\"email\"\r\n            label=\"邮箱\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            prop=\"department_name\"\r\n            label=\"部门\"\r\n          />\r\n          <el-table-column\r\n            prop=\"date_joined\"\r\n            label=\"创建时间\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            label=\"状态\"\r\n            align=\"center\"\r\n            width=\"100\"\r\n          >\r\n            <template slot-scope=\"{row}\">\r\n              <!-- v-model=\"row.is_active\" -->\r\n              <el-switch\r\n                v-model=\"row.is_active\"\r\n                :disabled=\"!checkPermission(['admin','system-users-lock'])||row.id === userId\"\r\n                :active-value=\"true\"\r\n                :inactive-value=\"false\"\r\n                active-color=\"#13ce66\"\r\n                inactive-color=\"#ff4949\"\r\n                @change=\"changeIsActive($event, row)\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            align=\"center\"\r\n            label=\"操作\"\r\n            width=\"230\"\r\n          >\r\n            <template slot-scope=\"{row}\">\r\n              <el-button v-permission=\"['admin','system-users-update']\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"updateUser(row)\" />\r\n              <el-button v-permission=\"['admin','system-users-del']\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteUser(row)\" />\r\n              <el-tooltip content=\"用户权限\" placement=\"top\">\r\n                <el-button v-permission=\"['admin','system-users-permissions']\" type=\"warning\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"userPermissions(row)\" />\r\n              </el-tooltip>\r\n              <el-tooltip content=\"重置密码\" placement=\"top\">\r\n                <el-button v-permission=\"['admin','system-users-reset-pwd']\" type=\"warning\" size=\"mini\" @click=\"resetPass(row)\"><svg-icon icon-class=\"reset_password\" /></el-button>\r\n              </el-tooltip>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!--分页组件-->\r\n        <el-pagination\r\n          :current-page=\"1\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"10\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </el-col>\r\n    </el-row>\r\n    <cuForm :dialog-visible=\"cuDialogVisible\" :departments-data=\"departmentsData\" :cur-id=\"curId\" @close=\"close\" @search=\"search\" />\r\n    <resetPwdForm :reset-pass-dialog-visible=\"resetPassDialogVisible\" :reset-cur-id=\"curId\" @resetClose=\"resetClose\" />\r\n    <permissionsDialog :permissions-dialog-visible=\"permissionsDialogVisible\" :user-id=\"curId\" @permissionsClose=\"permissionsClose\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport checkPermission from '@/utils/permission'\r\nimport cuForm from './components/cuForm'\r\nimport resetPwdForm from './components/resetPwdForm'\r\nimport permissionsDialog from './components/permissionsDialog'\r\nimport { getUsers, updateUserActive, deleteUser, deleteUsers } from '@/api/system/users'\r\nimport { getDepartments } from '@/api/system/departments'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  name: 'Users',\r\n  components: { cuForm, resetPwdForm, permissionsDialog },\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: '',\r\n        is_active: '',\r\n        ordering: 'id',\r\n        department_id: ''\r\n      },\r\n      tableData: [],\r\n      total: 0,\r\n      multipleSelection: [], // 已选择的用户id数组\r\n      filterText: '',\r\n      departmentsData: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      // 以下为cuForm子组件数据\r\n      cuDialogVisible: false,\r\n      curId: null,\r\n      // 以下为resetPwdForm子组件数据\r\n      resetPassDialogVisible: false,\r\n      // permissionsDialog子组件\r\n      permissionsDialogVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'userId'\r\n    ])\r\n  },\r\n  watch: {\r\n    filterText(val) {\r\n      this.$refs.tree.filter(val)\r\n    }\r\n  },\r\n  created() {\r\n    this.search()\r\n    this.getDepartments()\r\n  },\r\n  methods: {\r\n    checkPermission,\r\n    // 获取部门Tree结构\r\n    getDepartments() {\r\n      getDepartments().then(res => {\r\n        this.departmentsData = res.data.results\r\n      })\r\n    },\r\n    // 部门Tree过滤方法\r\n    filterNode(value, data) {\r\n      if (!value) return true\r\n      return data.label.indexOf(value) !== -1\r\n    },\r\n    // 过滤部门下的用户列表\r\n    handleNodeClick(data) {\r\n      this.form.department_id = data.id\r\n      this.search()\r\n    },\r\n    // 获取用户列表/搜索功能\r\n    search() {\r\n      getUsers(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 重置\r\n    resetForm() {\r\n      this.$refs.form.resetFields()\r\n      // form中未使用department_id字段需手动清除\r\n      this.form.department_id = ''\r\n      this.search()\r\n    },\r\n    // 修改用户状态\r\n    changeIsActive(event, row) {\r\n      const message = !event ? '锁定' : '激活'\r\n      this.$confirm('此操作将' + message + '用户 \"' + row.username + '\" , 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const data = { 'is_active': row.is_active }\r\n        updateUserActive(row.id, data).then(res => {\r\n          this.$message({\r\n            message: message + row.username + '成功',\r\n            type: 'success'\r\n          })\r\n        }).catch(() => {\r\n          row.is_active = !row.is_active\r\n        })\r\n      }).catch(() => {\r\n        row.is_active = !row.is_active\r\n      })\r\n    },\r\n    // 删除用户\r\n    deleteUser(row) {\r\n      this.$confirm('此操作将删除用户 \"' + row.username + '\" , 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteUser(row.id).then(res => {\r\n          this.$message({\r\n            message: '删除用户' + row.username + '成功',\r\n            type: 'success'\r\n          })\r\n          // 刷新table\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n\r\n    // table选择功能的change事件\r\n    handleSelectionChange() {\r\n      const deleteIds = []\r\n      this.$refs.multipleTable.selection.forEach(data => deleteIds.push(data.id))\r\n      this.multipleSelection = deleteIds\r\n    },\r\n\r\n    // 批量删除用户\r\n    deleteUsers() {\r\n      this.$confirm('此操作将删除选中用户' + ', 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteUsers(this.multipleSelection).then(res => {\r\n          this.$message({\r\n            message: '删除用户成功',\r\n            type: 'success'\r\n          })\r\n          // 刷新table\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    },\r\n    // cuForm子组件\r\n    createUser() {\r\n      this.cuDialogVisible = true\r\n    },\r\n    updateUser(row) {\r\n      this.curId = row.id\r\n      this.cuDialogVisible = true\r\n    },\r\n    close() {\r\n      this.cuDialogVisible = false\r\n      this.curId = null\r\n    },\r\n    // 重置密码子组件\r\n    resetPass(row) {\r\n      this.resetPassDialogVisible = true\r\n      this.curId = row.id\r\n    },\r\n    resetClose() {\r\n      this.resetPassDialogVisible = false\r\n      this.curId = null\r\n    },\r\n    // 用户权限组件\r\n    userPermissions(row) {\r\n      this.permissionsDialogVisible = true\r\n      this.curId = row.id\r\n    },\r\n    permissionsClose() {\r\n      this.permissionsDialogVisible = false\r\n      this.curId = null\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n"],"mappings":"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"}]}