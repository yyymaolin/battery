{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\cuForm.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\cuForm.vue","mtime":1695288475461},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEpvYkZ1bmN0aW9ucywgY3JlYXRlSm9iIH0gZnJvbSAnQC9hcGkvc3lzdGVtL2pvYnMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0N1Rm9ybScsCiAgcHJvcHM6IHsKICAgIGRpYWxvZ1Zpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBjdXJJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNyb246ICcnCiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uT3B0aW9uczoge30sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICflh73mlbDlkI3kuI3og73kuLrnqbonCiAgICAgICAgfV0sCiAgICAgICAgY3JvbjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ0Nyb27ooajovr7lvI/kuI3og73kuLrnqbonCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgfSwKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaCcpOwogICAgfSwKICAgIC8vIOiOt+WPluiwg+W6puWHveaVsOWIl+ihqAogICAgZ2V0Sm9iRnVuY3Rpb246IGZ1bmN0aW9uIGdldEpvYkZ1bmN0aW9uKHF1ZXJ5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmIChxdWVyeSAhPT0gJycpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIGdldEpvYkZ1bmN0aW9ucyh7CiAgICAgICAgICAnc2VhcmNoJzogcXVlcnkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzLmZ1bmN0aW9uT3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mdW5jdGlvbk9wdGlvbnMgPSBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOaPkOS6pOihqOWNlQogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjcmVhdGVKb2IoX3RoaXMyLnJ1bGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5paw5aKe5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzMi5zZWFyY2goKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getJobFunctions","createJob","name","props","dialogVisible","type","Boolean","default","curId","Number","data","ruleForm","cron","functionOptions","loading","rules","required","trigger","message","methods","close","$refs","resetFields","$emit","search","getJobFunction","query","_this","then","res","results","submitForm","formName","_this2","validate","valid","$message","console","log","resetForm"],"sources":["src/views/system/jobs/components/cuForm.vue"],"sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"dialogVisible\" title=\"新增调度任务\" width=\"700px\" :before-close=\"close\">\r\n    <el-form ref=\"ruleForm\" label-position=\"left\" :model=\"ruleForm\" status-icon :rules=\"rules\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n      <el-form-item label=\"函数名称\" prop=\"name\">\r\n        <el-select\r\n          v-model=\"ruleForm.name\"\r\n          clearable\r\n          filterable\r\n          remote\r\n          placeholder=\"请输入调度函数名称或功能描述\"\r\n          :remote-method=\"getJobFunction\"\r\n          :loading=\"loading\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in functionOptions\"\r\n            :key=\"item.name\"\r\n            :label=\"item.name\"\r\n            :value=\"item.name\"\r\n          >\r\n            <el-tooltip placement=\"right\">\r\n              <div slot=\"content\">{{ item.desc }}</div>\r\n              <span style=\"float:left\">{{ item.name }}</span>\r\n            </el-tooltip>\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"Cron表达式\" prop=\"cron\">\r\n        <el-input v-model=\"ruleForm.cron\" clearable autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getJobFunctions, createJob } from '@/api/system/jobs'\r\nexport default {\r\n  name: 'CuForm',\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    curId: {\r\n      type: Number,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        name: '',\r\n        cron: ''\r\n      },\r\n      functionOptions: {},\r\n      loading: false,\r\n      rules: {\r\n        name: [{ required: true, trigger: 'blur', message: '函数名不能为空' }],\r\n        cron: [{ required: true, trigger: 'blur', message: 'Cron表达式不能为空' }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$refs.ruleForm.resetFields()\r\n      this.$emit('close')\r\n    },\r\n    search() {\r\n      this.close()\r\n      this.$emit('search')\r\n    },\r\n    // 获取调度函数列表\r\n    getJobFunction(query) {\r\n      if (query !== '') {\r\n        this.loading = true\r\n        getJobFunctions({ 'search': query }).then(res => {\r\n          this.functionOptions = res.data.results\r\n          this.loading = false\r\n        })\r\n      } else {\r\n        this.functionOptions = []\r\n      }\r\n    },\r\n    // 提交表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          createJob(this.ruleForm).then(res => {\r\n            this.$message({\r\n              message: '新增成功',\r\n              type: 'success'\r\n            })\r\n            this.search()\r\n          })\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,SAAAA,eAAA,EAAAC,SAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,aAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EACA;EAEAG,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;QACAT,IAAA;QACAU,IAAA;MACA;MACAC,eAAA;MACAC,OAAA;MACAC,KAAA;QACAb,IAAA;UAAAc,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAN,IAAA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,KAAA,WAAAA,MAAA;MACA,KAAAC,KAAA,CAAAV,QAAA,CAAAW,WAAA;MACA,KAAAC,KAAA;IACA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAAJ,KAAA;MACA,KAAAG,KAAA;IACA;IACA;IACAE,cAAA,WAAAA,eAAAC,KAAA;MAAA,IAAAC,KAAA;MACA,IAAAD,KAAA;QACA,KAAAZ,OAAA;QACAd,eAAA;UAAA,UAAA0B;QAAA,GAAAE,IAAA,WAAAC,GAAA;UACAF,KAAA,CAAAd,eAAA,GAAAgB,GAAA,CAAAnB,IAAA,CAAAoB,OAAA;UACAH,KAAA,CAAAb,OAAA;QACA;MACA;QACA,KAAAD,eAAA;MACA;IACA;IACA;IACAkB,UAAA,WAAAA,WAAAC,QAAA;MAAA,IAAAC,MAAA;MACA,KAAAZ,KAAA,CAAAW,QAAA,EAAAE,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACAlC,SAAA,CAAAgC,MAAA,CAAAtB,QAAA,EAAAiB,IAAA,WAAAC,GAAA;YACAI,MAAA,CAAAG,QAAA;cACAlB,OAAA;cACAb,IAAA;YACA;YACA4B,MAAA,CAAAT,MAAA;UACA;QACA;UACAa,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACAC,SAAA,WAAAA,UAAAP,QAAA;MACA,KAAAX,KAAA,CAAAW,QAAA,EAAAV,WAAA;IACA;EACA;AACA"}]}