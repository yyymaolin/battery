{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\permissions\\components\\cuForm.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\permissions\\components\\cuForm.vue","mtime":1695288475462},{"path":"D:\\Desktop\\Django\\fe_admin\\babel.config.js","mtime":1695288475407},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFBlcm1pc3Npb24sIHVwZGF0ZVBlcm1pc3Npb24sIGNyZWF0ZVBlcm1pc3Npb24sIGdldFBlcm1pc3Npb25NZXRob2RzIH0gZnJvbSAnQC9hcGkvc3lzdGVtL3Blcm1pc3Npb25zJzsKaW1wb3J0IFRyZWVzZWxlY3QgZnJvbSAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QnOwppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDdUZvcm0nLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVzZWxlY3Q6IFRyZWVzZWxlY3QKICB9LAogIHByb3BzOiB7CiAgICBkaWFsb2dWaXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY3VySWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgcGVybWlzc2lvbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgc2lnbjogJycsCiAgICAgICAgbWVudTogdHJ1ZSwKICAgICAgICBtZXRob2Q6ICcnLAogICAgICAgIHBhdGg6ICcnLAogICAgICAgIHBpZDogbnVsbCwKICAgICAgICBkZXNjOiAnJwogICAgICB9LAogICAgICBwZXJtaXNzaW9uTWV0aG9kczogW10sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+adg+mZkOWQjeS4jeiDveS4uuepuicKICAgICAgICB9XSwKICAgICAgICBzaWduOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn5p2D6ZmQ5qCH6K+G5LiN6IO95Li656m6JwogICAgICAgIH1dLAogICAgICAgIG1lbnU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICfmmK/lkKbkuLroj5zljZXkuI3og73kuLrnqbonCiAgICAgICAgfV0sCiAgICAgICAgbWV0aG9kOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35rGC5pa55rOV5LiN6IO95Li656m6JwogICAgICAgIH1dLAogICAgICAgIHBhdGg6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fmsYLot6/lvoTkuI3og73kuLrnqbonCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBkaWFsb2dWaXNpYmxlOiBmdW5jdGlvbiBkaWFsb2dWaXNpYmxlKHYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHYpIHsKICAgICAgICBpZiAodGhpcy5jdXJJZCkgewogICAgICAgICAgZ2V0UGVybWlzc2lvbih0aGlzLmN1cklkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMucnVsZUZvcm0gPSByZXMuZGF0YTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvLyDojrflj5bor7fmsYLmlrnms5UKICAgICAgICB0aGlzLmdldE1ldGhvZCgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5ydWxlRm9ybS5tZXRob2QgPSAnJzsKICAgICAgdGhpcy5ydWxlRm9ybS5wYXRoID0gJyc7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoJyk7CiAgICB9LAogICAgZ2V0TWV0aG9kOiBmdW5jdGlvbiBnZXRNZXRob2QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBnZXRQZXJtaXNzaW9uTWV0aG9kcygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5wZXJtaXNzaW9uTWV0aG9kcyA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pOihqOWNlQogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMzLmN1cklkKSB7CiAgICAgICAgICAgIGlmICghX3RoaXMzLnJ1bGVGb3JtLnBpZCkgewogICAgICAgICAgICAgIF90aGlzMy5ydWxlRm9ybS5waWQgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfdGhpczMucnVsZUZvcm0ubWVudSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIF90aGlzMy5ydWxlRm9ybS5tZXRob2QgPSAnJzsKICAgICAgICAgICAgICBfdGhpczMucnVsZUZvcm0ucGF0aCA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHVwZGF0ZVBlcm1pc3Npb24oX3RoaXMzLmN1cklkLCBfdGhpczMucnVsZUZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzMy5zZWFyY2goKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjcmVhdGVQZXJtaXNzaW9uKF90aGlzMy5ydWxlRm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmlrDlop7miJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMzLnNlYXJjaCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfTs="},{"version":3,"names":["getPermission","updatePermission","createPermission","getPermissionMethods","Treeselect","name","components","props","dialogVisible","type","Boolean","default","curId","Number","permissions","Array","_default","data","ruleForm","sign","menu","method","path","pid","desc","permissionMethods","rules","required","trigger","message","watch","v","_this","then","res","getMethod","methods","close","$refs","resetFields","$emit","search","_this2","results","submitForm","formName","_this3","validate","valid","$message","console","log","resetForm"],"sources":["src/views/system/permissions/components/cuForm.vue"],"sourcesContent":["<template>\r\n  <el-dialog :close-on-click-modal=\"false\" :visible.sync=\"dialogVisible\" :title=\"curId ? '编辑权限' : '新增权限'\" width=\"700px\" :before-close=\"close\">\r\n    <el-form ref=\"ruleForm\" label-position=\"left  \" :model=\"ruleForm\" status-icon :rules=\"rules\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n      <el-form-item label=\"权限名\" prop=\"name\">\r\n        <el-input v-model=\"ruleForm.name\" clearable />\r\n      </el-form-item>\r\n      <el-form-item label=\"权限标识\" prop=\"sign\">\r\n        <el-input v-model=\"ruleForm.sign\" clearable />\r\n      </el-form-item>\r\n      <el-form-item label=\"是否为菜单\" prop=\"menu\">\r\n        <el-switch\r\n          v-model=\"ruleForm.menu\"\r\n          active-text=\"是\"\r\n          inactive-text=\"否\"\r\n        />\r\n      </el-form-item>\r\n      <template v-if=\"ruleForm.menu===false\">\r\n        <el-form-item label=\"请求方法\" prop=\"method\">\r\n          <el-select v-model=\"ruleForm.method\" clearable placeholder=\"选择请求方法\">\r\n            <el-option\r\n              v-for=\"item in permissionMethods\"\r\n              :key=\"item.value\"\r\n              :label=\"item.value\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"请求路径\" prop=\"path\">\r\n          <el-input v-model=\"ruleForm.path\" clearable />\r\n        </el-form-item>\r\n      </template>\r\n      <el-form-item label=\"父权限\" prop=\"pid\">\r\n        <treeselect\r\n          v-model=\"ruleForm.pid\"\r\n          :options=\"permissions\"\r\n          style=\"width: 178px\"\r\n          placeholder=\"选择父权限\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"描述\" prop=\"desc\">\r\n        <el-input v-model=\"ruleForm.desc\" clearable />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getPermission, updatePermission, createPermission, getPermissionMethods } from '@/api/system/permissions'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nexport default {\r\n  name: 'CuForm',\r\n  components: { Treeselect },\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    curId: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n    permissions: {\r\n      type: Array,\r\n      default: () => {\r\n        return\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        name: '',\r\n        sign: '',\r\n        menu: true,\r\n        method: '',\r\n        path: '',\r\n        pid: null,\r\n        desc: ''\r\n      },\r\n      permissionMethods: [],\r\n      rules: {\r\n        name: [{ required: true, trigger: 'blur', message: '权限名不能为空' }],\r\n        sign: [{ required: true, trigger: 'blur', message: '权限标识不能为空' }],\r\n        menu: [{ required: true, trigger: 'blur', message: '是否为菜单不能为空' }],\r\n        method: [{ required: true, trigger: 'blur', message: '请求方法不能为空' }],\r\n        path: [{ required: true, trigger: 'blur', message: '请求路径不能为空' }]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    dialogVisible(v) {\r\n      if (v) {\r\n        if (this.curId) {\r\n          getPermission(this.curId).then(res => {\r\n            this.ruleForm = res.data\r\n          })\r\n        }\r\n        // 获取请求方法\r\n        this.getMethod()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$refs.ruleForm.resetFields()\r\n      this.ruleForm.method = ''\r\n      this.ruleForm.path = ''\r\n      this.$emit('close')\r\n    },\r\n    search() {\r\n      this.close()\r\n      this.$emit('search')\r\n    },\r\n    getMethod() {\r\n      getPermissionMethods().then(res => {\r\n        this.permissionMethods = res.data.results\r\n      })\r\n    },\r\n    // 提交表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (this.curId) {\r\n            if (!this.ruleForm.pid) {\r\n              this.ruleForm.pid = null\r\n            }\r\n            if (this.ruleForm.menu === true) {\r\n              this.ruleForm.method = ''\r\n              this.ruleForm.path = ''\r\n            }\r\n            updatePermission(this.curId, this.ruleForm).then(res => {\r\n              this.$message({\r\n                message: '修改成功',\r\n                type: 'success'\r\n              })\r\n              this.search()\r\n            })\r\n          } else {\r\n            createPermission(this.ruleForm).then(res => {\r\n              this.$message({\r\n                message: '新增成功',\r\n                type: 'success'\r\n              })\r\n              this.search()\r\n            })\r\n          }\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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"}]}