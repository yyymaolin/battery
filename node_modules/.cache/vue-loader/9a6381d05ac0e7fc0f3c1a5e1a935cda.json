{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\components\\permissionsDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\users\\components\\permissionsDialog.vue","mtime":1697857749133},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRQZXJtaXNzaW9ucyB9IGZyb20gJ0AvYXBpL3N5c3RlbS9wZXJtaXNzaW9ucycNCmltcG9ydCB7IGdldFVzZXJQZXJtaXNzaW9ucyB9IGZyb20gJ0AvYXBpL3N5c3RlbS91c2VycycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1Blcm1pc3Npb25zRGlhbG9nJywNCiAgcHJvcHM6IHsNCiAgICBwZXJtaXNzaW9uc0RpYWxvZ1Zpc2libGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogICAgdXNlcklkOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiBudWxsDQogICAgfQ0KICB9LA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBlcm1pc3Npb25zRGF0YTogW10sDQogICAgICBwZXJtaXNzaW9uc0lkczogW10sDQogICAgICBkZWZhdWx0UHJvcHM6IHsgY2hpbGRyZW46ICdjaGlsZHJlbicsIGxhYmVsOiAnbGFiZWwnIH0NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgcGVybWlzc2lvbnNEaWFsb2dWaXNpYmxlKHYpIHsNCiAgICAgIGlmICh2KSB7DQogICAgICAgIGlmICh0aGlzLnVzZXJJZCkgew0KICAgICAgICAgIGdldFBlcm1pc3Npb25zKCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5wZXJtaXNzaW9uc0RhdGEgPSByZXMuZGF0YQ0KICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXNhYmxlZCh0aGlzLnBlcm1pc3Npb25zRGF0YSwgdHJ1ZSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIGdldFVzZXJQZXJtaXNzaW9ucyh0aGlzLnVzZXJJZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5wZXJtaXNzaW9uc0lkcyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLnBlcm1pc3Npb25zSWRzID0gW10NCiAgICAgIHRoaXMucGVybWlzc2lvbnNEYXRhID0gW10NCiAgICAgIHRoaXMuJGVtaXQoJ3Blcm1pc3Npb25zQ2xvc2UnKQ0KICAgIH0sDQogICAgLy8g5pu05pS5UGVybWlzc2lvbnMgVHJlZeeahGRpc2FibGVk5bGe5oCnDQogICAgY2hhbmdlRGlzYWJsZWQoZGF0YSwgZGlzYWJsZWQpIHsNCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGRhdGFbaW5kZXhdLmNoaWxkcmVuDQogICAgICAgIGlmIChjaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgdGhpcy5jaGFuZ2VEaXNhYmxlZChjaGlsZHJlbiwgZGlzYWJsZWQpDQogICAgICAgIH0NCiAgICAgICAgZGF0YVtpbmRleF0uZGlzYWJsZWQgPSBkaXNhYmxlZA0KICAgICAgfQ0KICAgIH0sDQogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["permissionsDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"permissionsDialog.vue","sourceRoot":"src/views/system/users/components","sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"permissionsDialogVisible\" title=\"权限列表\" width=\"700px\" :before-close=\"close\">\r\n    <el-tree\r\n      ref=\"permissions\"\r\n      :data=\"permissionsData\"\r\n      :default-checked-keys=\"permissionsIds\"\r\n      :props=\"defaultProps\"\r\n      check-strictly\r\n      accordion\r\n      show-checkbox\r\n      node-key=\"id\"\r\n    />\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getPermissions } from '@/api/system/permissions'\r\nimport { getUserPermissions } from '@/api/system/users'\r\nexport default {\r\n  name: 'PermissionsDialog',\r\n  props: {\r\n    permissionsDialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    userId: {\r\n      type: Number,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      permissionsData: [],\r\n      permissionsIds: [],\r\n      defaultProps: { children: 'children', label: 'label' }\r\n    }\r\n  },\r\n  watch: {\r\n    permissionsDialogVisible(v) {\r\n      if (v) {\r\n        if (this.userId) {\r\n          getPermissions().then(res => {\r\n            this.permissionsData = res.data\r\n            this.changeDisabled(this.permissionsData, true)\r\n          })\r\n          getUserPermissions(this.userId).then(res => {\r\n            this.permissionsIds = res.data.results\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.permissionsIds = []\r\n      this.permissionsData = []\r\n      this.$emit('permissionsClose')\r\n    },\r\n    // 更改Permissions Tree的disabled属性\r\n    changeDisabled(data, disabled) {\r\n      for (let index = 0; index < data.length; index++) {\r\n        const children = data[index].children\r\n        if (children !== undefined) {\r\n          this.changeDisabled(children, disabled)\r\n        }\r\n        data[index].disabled = disabled\r\n      }\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}