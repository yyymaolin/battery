{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\information\\index.vue?vue&type=style&index=0&id=6ac1c7f6&rel=stylesheet%2Fscss&lang=scss","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\information\\index.vue","mtime":1695288475457},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1698226179238},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698226187603},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1698226183222},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYXZhdGFyIHsKICB3aWR0aDogMTIwcHg7CiAgaGVpZ2h0OiAxMjBweDsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KLnVzZXItaW5mbyB7CiAgcGFkZGluZy1sZWZ0OiAwOwogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgbGl7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0YwRjNGNDsKICAgIHBhZGRpbmc6IDExcHggMDsKICAgIGZvbnQtc2l6ZTogMTNweDsKICB9CiAgLnVzZXItcmlnaHQgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgYXsKICAgICAgY29sb3I6ICMzMTdFRjM7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/information","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col :span=\"6\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>个人信息</span>\r\n          </div>\r\n          <div>\r\n            <div style=\"text-align: center\">\r\n              <div class=\"el-upload\">\r\n                <img :src=\"avatar\" title=\"点击上传头像\" class=\"avatar\" @click=\"toggleShow\">\r\n                <myUpload\r\n                  v-model=\"show\"\r\n                  :headers=\"headers\"\r\n                  :url=\"updateAvatarApi\"\r\n                  method=\"PUT\"\r\n                  field=\"image\"\r\n                  @crop-upload-success=\"cropUploadSuccess\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <ul class=\"user-info\">\r\n              <li><div style=\"height: 100%\"><svg-icon icon-class=\"login\" /> 登录账号<div class=\"user-right\">{{ username }}</div></div></li>\r\n              <li><svg-icon icon-class=\"user1\" /> 用户姓名 <div class=\"user-right\">{{ name }}</div></li>\r\n              <li><svg-icon icon-class=\"dept\" /> 所属部门 <div class=\"user-right\"> {{ department }}</div></li>\r\n              <li><svg-icon icon-class=\"phone\" /> 手机号码 <div class=\"user-right\">{{ mobile }}</div></li>\r\n              <li><svg-icon icon-class=\"email\" /> 用户邮箱 <div class=\"user-right\">{{ email }}</div></li>\r\n              <li>\r\n                <svg-icon icon-class=\"anq\" /> 安全设置\r\n                <div class=\"user-right\">\r\n                  <a @click=\"$refs.pass.dialogVisible = true\">修改密码</a>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"18\">\r\n        <el-card class=\"box-card\" style=\"margin-left: 20px;\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>个人信息</span>\r\n          </div>\r\n          <div>\r\n            <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"80px\">\r\n              <el-form-item label=\"姓名\" prop=\"name\">\r\n                <el-input v-model=\"form.name\" style=\"width: 40%\" />\r\n                <span style=\"color: #C0C0C0;margin-left: 10px;\">用户真实姓名或昵称</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\" prop=\"mobile\">\r\n                <el-input v-model=\"form.mobile\" style=\"width: 40%\" />\r\n                <span style=\"color: #C0C0C0;margin-left: 10px;\">手机号可用于登录使用</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model=\"form.email\" style=\"width: 40%\" />\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit('form')\">保存配置</el-button>\r\n              </el-form-item>\r\n            </el-form></div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <updatePass ref=\"pass\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport myUpload from 'vue-image-crop-upload'\r\nimport updatePass from './components/updatePass'\r\nimport { validatePhone, validateEMail } from '@/utils/rulesValidate'\r\nimport { changeInformation } from '@/api/information/centre'\r\nimport { mapGetters } from 'vuex'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\nexport default {\r\n  name: 'Centre',\r\n  components: { updatePass, myUpload },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      headers: {\r\n        'Authorization': 'Bearer ' + getToken()\r\n      },\r\n      form: {},\r\n      rules: {\r\n        name: [\r\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { validator: validateEMail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { validator: validatePhone, trigger: 'blur' }\r\n        ]\r\n      },\r\n      updateAvatarApi: process.env.VUE_APP_BASE_API + '/information/change-avatar/'\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'username',\r\n      'department',\r\n      'name',\r\n      'avatar',\r\n      'mobile',\r\n      'email'\r\n    ])\r\n  },\r\n  created() {\r\n    this.form = { name: this.name, mobile: this.mobile, email: this.email }\r\n    store.dispatch('user/getInfo').then(() => {})\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show\r\n    },\r\n    // 头像上传成功的回调\r\n    cropUploadSuccess() {\r\n      store.dispatch('user/getInfo').then(() => {})\r\n    },\r\n    // 修改个人信息\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n        //   if (this.form.mobile === '') {\r\n        //     this.form.mobile = null\r\n        //   }\r\n          changeInformation(this.form).then(res => {\r\n            this.$message({\r\n              message: '修改成功',\r\n              type: 'success'\r\n            })\r\n            store.dispatch('user/getInfo').then(() => {})\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n  .avatar {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n  }\r\n  .user-info {\r\n    padding-left: 0;\r\n    list-style: none;\r\n    li{\r\n      border-bottom: 1px solid #F0F3F4;\r\n      padding: 11px 0;\r\n      font-size: 13px;\r\n    }\r\n    .user-right {\r\n      float: right;\r\n      a{\r\n        color: #317EF3;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}