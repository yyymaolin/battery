{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\executionDialog.vue?vue&type=style&index=0&id=8580b4cc&lang=scss&scoped=true","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\jobs\\components\\executionDialog.vue","mtime":1695288475461},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1698226179238},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1698226187603},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1698226183222},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KcHJlew0KICB3aGl0ZS1zcGFjZTpwcmUtd3JhcDsNCiAgd29yZC13cmFwOiBicmVhay13b3JkDQp9Ow0KLmVycm9yUHJlew0KICBoZWlnaHQ6IDYwdmg7DQogIG92ZXJmbG93OiBhdXRvOw0KfQ0K"},{"version":3,"sources":["executionDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"executionDialog.vue","sourceRoot":"src/views/system/jobs/components","sourcesContent":["<template>\r\n  <el-dialog title=\"执行记录\" :visible.sync=\"executionDialogVisible\" :before-close=\"close\">\r\n    <el-table :data=\"tableData\">\r\n      <el-table-column property=\"status\" label=\"状态\" width=\"150\" />\r\n      <el-table-column property=\"run_time\" label=\"执行时间\" width=\"200\" />\r\n      <el-table-column property=\"duration\" label=\"耗时(s)\" />\r\n      <el-table-column property=\"exception\" label=\"异常\" show-overflow-tooltip />\r\n      <el-table-column label=\"详情回溯\">\r\n        <template slot-scope=\"{row}\">\r\n          <el-link v-if=\"row.traceback\" type=\"danger\" @click=\"details(row)\">详情回溯</el-link>\r\n          <el-dialog append-to-body title=\"详情回溯\" :visible.sync=\"detailsDialogVisible\">\r\n            <pre class=\"details\">{{ errorDetails }}</pre>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--分页组件-->\r\n    <el-pagination\r\n      :current-page=\"1\"\r\n      :page-sizes=\"[10, 20, 50, 100]\"\r\n      :page-size=\"10\"\r\n      :total=\"total\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n    />\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getJobExecutions } from '@/api/system/jobs'\r\nexport default {\r\n  name: 'ExecutionDialog',\r\n  props: {\r\n    executionDialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    jobID: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: '',\r\n        job__id: ''\r\n      },\r\n      tableData: [],\r\n      total: 0,\r\n      detailsDialogVisible: false,\r\n      errorDetails: ''\r\n    }\r\n  },\r\n  watch: {\r\n    executionDialogVisible(v) {\r\n      if (v) {\r\n        if (this.jobID) {\r\n          this.form.job__id = this.jobID\r\n          this.search()\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.form = this.$options.data().form\r\n      this.$emit('executionDialogClose')\r\n    },\r\n    search() {\r\n      getJobExecutions(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 详情回溯Dialog\r\n    details(row) {\r\n      this.errorDetails = row.traceback\r\n      this.detailsDialogVisible = true\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\npre{\r\n  white-space:pre-wrap;\r\n  word-wrap: break-word\r\n};\r\n.errorPre{\r\n  height: 60vh;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"]}]}