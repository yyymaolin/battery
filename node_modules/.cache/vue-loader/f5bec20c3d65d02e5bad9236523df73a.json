{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\monitor\\error\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\monitor\\error\\index.vue","mtime":1695288475459},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWxldGVFcnJvckxvZ3MsIGdldEVycm9yTG9ncyB9IGZyb20gJ0AvYXBpL21vbml0b3IvZXJyb3InDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdVc2VycycsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgc2l6ZTogMTAsDQogICAgICAgIHNlYXJjaDogJycNCiAgICAgIH0sDQogICAgICBlcnJvckRldGFpbHM6ICcnLA0KICAgICAgZGlhbG9nVGFibGVWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICB0b3RhbDogMA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnNlYXJjaCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDojrflj5bplJnor6/ml6Xlv5fliJfooagv5pCc57Si5Yqf6IO9DQogICAgc2VhcmNoKCkgew0KICAgICAgZ2V0RXJyb3JMb2dzKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6YeN572uDQogICAgcmVzZXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCkNCiAgICAgIHRoaXMuc2VhcmNoKCkNCiAgICB9LA0KICAgIC8vIOa4heepuumUmeivr+aXpeW/lw0KICAgIGRlbGV0ZUxvZ3MoKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmuIXnqbrmiYDmnInplJnor6/ml6Xlv5fkv6Hmga8gLCDmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxldGVFcnJvckxvZ3MoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5riF56m65oiQ5YqfJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5zZWFyY2goKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOmUmeivr+ivpuaDhWRpYWxvZ+aYvuekug0KICAgIGRpYWxvZ1Zpc2libGUocm93KSB7DQogICAgICB0aGlzLmVycm9yRGV0YWlscyA9IHJvdy5kZXRhaWwNCiAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgLy8g5YiG6aG1DQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5zaXplID0gdmFsDQogICAgICB0aGlzLnNlYXJjaCgpDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5mb3JtLnBhZ2UgPSB2YWwNCiAgICAgIHRoaXMuc2VhcmNoKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/monitor/error","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col>\r\n        <el-form ref=\"form\" :model=\"form\" inline>\r\n          <el-form-item prop=\"search\">\r\n            <el-input v-model=\"form.search\" clearable style=\"width:300px\" prefix-icon=\"el-icon-search\" placeholder=\"输入内容搜索\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"success\" icon=\"el-icon-search\" size=\"medium\" @click=\"search(form)\">搜索</el-button>\r\n            <el-button type=\"warning\" icon=\"el-icon-refresh-left\" size=\"medium\" @click=\"resetForm()\">重置</el-button>\r\n            <el-button v-permission=\"['admin','monitor-error-clear']\" type=\"danger\" icon=\"el-icon-delete\" size=\"medium\" @click=\"deleteLogs()\">清空日志</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column\r\n            type=\"index\"\r\n            width=\"50\"\r\n          />\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"用户名\"\r\n          />\r\n          <el-table-column\r\n            prop=\"ip\"\r\n            label=\"IP\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            prop=\"view\"\r\n            label=\"视图\"\r\n          />\r\n          <el-table-column\r\n            prop=\"desc\"\r\n            label=\"描述\"\r\n            show-overflow-tooltip\r\n          />\r\n          <el-table-column\r\n            prop=\"create_time\"\r\n            label=\"错误时间\"\r\n            width=\"180\"\r\n          />\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            align=\"center\"\r\n            label=\"操作\"\r\n            width=\"220\"\r\n          >\r\n            <template slot-scope=\"{row}\">\r\n              <el-button type=\"text\" size=\"mini\" @click=\"dialogVisible(row)\">错误详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!--分页组件-->\r\n        <el-pagination\r\n          :current-page=\"1\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"10\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog title=\"错误详情\" :visible.sync=\"dialogTableVisible\">\r\n      <pre class=\"errorPre\">{{ errorDetails }}</pre>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deleteErrorLogs, getErrorLogs } from '@/api/monitor/error'\r\nexport default {\r\n  name: 'Users',\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: ''\r\n      },\r\n      errorDetails: '',\r\n      dialogTableVisible: false,\r\n      tableData: [],\r\n      total: 0\r\n    }\r\n  },\r\n  created() {\r\n    this.search()\r\n  },\r\n  methods: {\r\n    // 获取错误日志列表/搜索功能\r\n    search() {\r\n      getErrorLogs(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 重置\r\n    resetForm() {\r\n      this.$refs.form.resetFields()\r\n      this.search()\r\n    },\r\n    // 清空错误日志\r\n    deleteLogs() {\r\n      this.$confirm('此操作将清空所有错误日志信息 , 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteErrorLogs().then(res => {\r\n          this.$message({\r\n            message: '清空成功',\r\n            type: 'success'\r\n          })\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n    // 错误详情dialog显示\r\n    dialogVisible(row) {\r\n      this.errorDetails = row.detail\r\n      this.dialogTableVisible = true\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\npre{\r\n  white-space:pre-wrap;\r\n  word-wrap: break-word\r\n};\r\n.errorPre{\r\n  height: 60vh;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"]}]}