{"remainingRequest":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\roles\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\Django\\fe_admin\\src\\views\\system\\roles\\index.vue","mtime":1695288475463},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1698226183223},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1698226179476},{"path":"D:\\Desktop\\Django\\fe_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1698226183228}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY3VGb3JtIGZyb20gJy4vY29tcG9uZW50cy9jdUZvcm0nDQppbXBvcnQgeyBnZXRSb2xlcywgdXBkYXRlUm9sZVBlcm1pc3Npb25zLCBkZWxldGVSb2xlLCBkZWxldGVSb2xlcyB9IGZyb20gJ0AvYXBpL3N5c3RlbS9yb2xlcycNCmltcG9ydCB7IGdldFBlcm1pc3Npb25zIH0gZnJvbSAnQC9hcGkvc3lzdGVtL3Blcm1pc3Npb25zJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUm9sZXMnLA0KICBjb21wb25lbnRzOiB7IGN1Rm9ybSB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtOiB7DQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHNpemU6IDEwLA0KICAgICAgICBzZWFyY2g6ICcnLA0KICAgICAgICBvcmRlcmluZzogJ2lkJw0KICAgICAgfSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICB0b3RhbDogMCwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIGN1cnJlbnRJZDogbnVsbCwNCiAgICAgIC8vIOadg+mZkOaVsOmDqOWIhuaVsOaNrg0KICAgICAgc3RlcDogMCwNCiAgICAgIHNob3dCdXR0b246IGZhbHNlLA0KICAgICAgcGVybWlzc2lvbnNEYXRhOiBbXSwNCiAgICAgIHBlcm1pc3Npb25JZHM6IFtdLA0KICAgICAgZGVmYXVsdFByb3BzOiB7IGNoaWxkcmVuOiAnY2hpbGRyZW4nLCBsYWJlbDogJ2xhYmVsJyB9LA0KICAgICAgLy8gY3VGb3Jt5pWw5o2uDQogICAgICBjdURpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgY3VySWQ6IG51bGwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5zZWFyY2goKQ0KICAgIHRoaXMuZ2V0UGVybWlzc2lvbnMoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W6KeS6Imy5YiX6KGoL+aQnOe0ouWKn+iDvQ0KICAgIHNlYXJjaChzZWFyY2gpIHsNCiAgICAgIGlmIChzZWFyY2gpIHsNCiAgICAgICAgLy8g5riF56m65p2D6ZmQ6I+c5Y2V6YOo5YiG5pWw5o2uDQogICAgICAgIHRoaXMuc2hvd0J1dHRvbiA9IGZhbHNlDQogICAgICAgIHRoaXMucGVybWlzc2lvbklkcyA9IFtdDQogICAgICAgIHRoaXMuJHJlZnMucGVybWlzc2lvbnMuc2V0Q2hlY2tlZEtleXMoW10pDQogICAgICAgIHRoaXMuY2hhbmdlRGlzYWJsZWQodGhpcy5wZXJtaXNzaW9uc0RhdGEsIGZhbHNlKQ0KICAgICAgICB0aGlzLnN0ZXAgPSAwDQogICAgICAgIHRoaXMuY3VycmVudElkID0gbnVsbA0KICAgICAgfQ0KICAgICAgZ2V0Um9sZXModGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEucmVzdWx0cw0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuY291bnQNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDph43nva4NCiAgICByZXNldEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKQ0KICAgICAgdGhpcy5zZWFyY2goJ3NlYXJjaCcpDQogICAgfSwNCiAgICBnZXRSb3dLZXlzKHJvdykgew0KICAgICAgcmV0dXJuIHJvdy5pZA0KICAgIH0sDQogICAgLy8g6I635Y+WUGVybWlzc2lvbnMgVHJlZeeahOaJgOaciUlEDQogICAgZ2V0QWxsUGVybWlzc2lvbkRhdGFJZChhcnJheSwgZGF0YXMpIHsNCiAgICAgIGZvciAoY29uc3QgaW5kZXggaW4gZGF0YXMpIHsNCiAgICAgICAgY29uc3QgaWQgPSBkYXRhc1tpbmRleF0uaWQNCiAgICAgICAgYXJyYXkucHVzaChpZCkNCiAgICAgICAgaWYgKGRhdGFzW2luZGV4XS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoaXMuZ2V0QWxsUGVybWlzc2lvbkRhdGFJZChhcnJheSwgZGF0YXNbaW5kZXhdLmNoaWxkcmVuKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gYXJyYXkNCiAgICB9LA0KICAgIC8vIOabtOaUuVBlcm1pc3Npb25zIFRyZWXnmoRkaXNhYmxlZOWxnuaApw0KICAgIGNoYW5nZURpc2FibGVkKGRhdGEsIGRpc2FibGVkKSB7DQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBkYXRhW2luZGV4XS5jaGlsZHJlbg0KICAgICAgICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIHRoaXMuY2hhbmdlRGlzYWJsZWQoY2hpbGRyZW4sIGRpc2FibGVkKQ0KICAgICAgICB9DQogICAgICAgIGRhdGFbaW5kZXhdLmRpc2FibGVkID0gZGlzYWJsZWQNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIHRhYmxl6YCJ5oup5qGG5Yqf6IO955qEY2hhbmdl5LqL5Lu2DQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkgew0KICAgICAgY29uc3QgZGVsZXRlSWRzID0gW10NCiAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5zZWxlY3Rpb24uZm9yRWFjaChkYXRhID0+IGRlbGV0ZUlkcy5wdXNoKGRhdGEuaWQpKQ0KICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IGRlbGV0ZUlkcw0KICAgIH0sDQogICAgLy8g6K6+572uYWRtaW7op5LoibLooYzkuI3lj6/li77pgIkNCiAgICBjaGVja1NlbGVjdFRhYmxlKHJvdykgew0KICAgICAgcmV0dXJuIHJvdy5uYW1lICE9PSAnYWRtaW4nDQogICAgfSwNCiAgICAvLyB0YWJsZeWNlemAieinpuWPkeWNlemAiQ0KICAgIHRhYmxlSGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIGlmICh2YWwpIHsNCiAgICAgICAgLy8g5riF56m66I+c5Y2V55qE6YCJ5LitDQogICAgICAgIHRoaXMuJHJlZnMucGVybWlzc2lvbnMuc2V0Q2hlY2tlZEtleXMoW10pDQogICAgICAgIGlmICh2YWwubmFtZSA9PT0gJ2FkbWluJykgew0KICAgICAgICAgIHRoaXMuY2hhbmdlRGlzYWJsZWQodGhpcy5wZXJtaXNzaW9uc0RhdGEsIHRydWUpDQogICAgICAgICAgdGhpcy5wZXJtaXNzaW9uSWRzID0gdGhpcy5nZXRBbGxQZXJtaXNzaW9uRGF0YUlkKFtdLCB0aGlzLnBlcm1pc3Npb25zRGF0YSkNCiAgICAgICAgICB0aGlzLnNob3dCdXR0b24gPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuc3RlcCA9IDMNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmNoYW5nZURpc2FibGVkKHRoaXMucGVybWlzc2lvbnNEYXRhLCBmYWxzZSkNCiAgICAgICAgICAvLyDkv53lrZjlvZPliY3nmoTop5LoibJpZA0KICAgICAgICAgIHRoaXMuY3VycmVudElkID0gdmFsLmlkDQogICAgICAgICAgLy8g5Yid5aeL5YyW6buY6K6k6YCJ5Lit55qEa2V5DQogICAgICAgICAgdGhpcy5wZXJtaXNzaW9uSWRzID0gdmFsLnBlcm1pc3Npb25zDQogICAgICAgICAgLy8g5pi+56S65o6I5p2D5oyJ6ZKuDQogICAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gdHJ1ZQ0KICAgICAgICAgIC8vIOatpemqpOaYvuekug0KICAgICAgICAgIHRoaXMuc3RlcCA9IDENCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5Yig6Zmk6KeS6ImyDQogICAgZGVsZXRlUm9sZShyb3cpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWIoOmZpOinkuiJsiAiJyArIHJvdy5uYW1lICsgJyIgLCDmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxldGVSb2xlKHJvdy5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOinkuiJsicgKyByb3cubmFtZSArICfmiJDlip8nLA0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgfSkNCiAgICAgICAgICAvLyDliLfmlrB0YWJsZQ0KICAgICAgICAgIHRoaXMuc2VhcmNoKCkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmibnph4/liKDpmaTnlKjmiLcNCiAgICBkZWxldGVSb2xlcygpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWIoOmZpOmAieS4reinkuiJsicgKyAnLCDmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxldGVSb2xlcyh0aGlzLm11bHRpcGxlU2VsZWN0aW9uKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk55So5oi35oiQ5YqfJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgICAgLy8g5Yi35pawdGFibGUNCiAgICAgICAgICB0aGlzLnNlYXJjaCgpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5YiG6aG1DQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5zaXplID0gdmFsDQogICAgICB0aGlzLnNlYXJjaCgpDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5mb3JtLnBhZ2UgPSB2YWwNCiAgICAgIHRoaXMuc2VhcmNoKCkNCiAgICB9LA0KICAgIC8vIOiOt+WPluadg+mZkOaVsOe7k+aehOaVsOaNrg0KICAgIGdldFBlcm1pc3Npb25zKCkgew0KICAgICAgZ2V0UGVybWlzc2lvbnMoKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMucGVybWlzc2lvbnNEYXRhID0gcmVzLmRhdGEucmVzdWx0cw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIHRyZWXmnYPpmZDoioLngrnooqvngrnlh7vml7bnmoTlm57osIMNCiAgICBoYW5kbGVDaGVja0NsaWNrKGN1cnJlbnRPYmosIHRyZWVTdGF0dXMpIHsNCiAgICAgIGlmICh0aGlzLmN1cnJlbnRJZCkgew0KICAgICAgICB0aGlzLnN0ZXAgPSAyDQogICAgICB9DQogICAgICAvLyDnlKjkuo7vvJrniLblrZDoioLngrnkuKXmoLzkupLkuI3lhbPogZTml7bvvIzniLboioLngrnli77pgInlj5jljJbml7bpgJrnn6XlrZDoioLngrnlkIzmraXlj5jljJbvvIzlrp7njrDljZXlkJHlhbPogZTjgIINCiAgICAgIGNvbnN0IHNlbGVjdGVkID0gdHJlZVN0YXR1cy5jaGVja2VkS2V5cy5pbmRleE9mKGN1cnJlbnRPYmouaWQpIC8vIC0x5pyq6YCJ5LitDQogICAgICAvLyDpgInkuK0NCiAgICAgIGlmIChzZWxlY3RlZCAhPT0gLTEpIHsNCiAgICAgICAgLy8g5a2Q6IqC54K55Y+q6KaB6KKr6YCJ5Lit54i26IqC54K55bCx6KKr6YCJ5LitDQogICAgICAgIHRoaXMuc2VsZWN0ZWRQYXJlbnQoY3VycmVudE9iaikNCiAgICAgICAgLy8g57uf5LiA5aSE55CG5a2Q6IqC54K55Li655u45ZCM55qE5Yu+6YCJ54q25oCBDQogICAgICAgIHRoaXMudW5pdGVDaGlsZFNhbWUoY3VycmVudE9iaiwgdHJ1ZSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOacqumAieS4rSDlpITnkIblrZDoioLngrnlhajpg6jmnKrpgInkuK0NCiAgICAgICAgaWYgKGN1cnJlbnRPYmouY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIGlmIChjdXJyZW50T2JqLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgdGhpcy51bml0ZUNoaWxkU2FtZShjdXJyZW50T2JqLCBmYWxzZSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOe7n+S4gOWkhOeQhuWtkOiKgueCueS4uuebuOWQjOeahOWLvumAieeKtuaAgQ0KICAgIHVuaXRlQ2hpbGRTYW1lKHRyZWVMaXN0LCBpc1NlbGVjdGVkKSB7DQogICAgICB0aGlzLiRyZWZzLnBlcm1pc3Npb25zLnNldENoZWNrZWQodHJlZUxpc3QuaWQsIGlzU2VsZWN0ZWQpDQogICAgICBpZiAodHJlZUxpc3QuY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZWVMaXN0LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdGhpcy51bml0ZUNoaWxkU2FtZSh0cmVlTGlzdC5jaGlsZHJlbltpXSwgaXNTZWxlY3RlZCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g57uf5LiA5aSE55CG54i26IqC54K55Li66YCJ5LitDQogICAgc2VsZWN0ZWRQYXJlbnQoY3VycmVudE9iaikgew0KICAgICAgY29uc3QgY3VycmVudE5vZGUgPSB0aGlzLiRyZWZzLnBlcm1pc3Npb25zLmdldE5vZGUoY3VycmVudE9iaikNCiAgICAgIGlmIChjdXJyZW50Tm9kZS5wYXJlbnQua2V5ICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5wZXJtaXNzaW9ucy5zZXRDaGVja2VkKGN1cnJlbnROb2RlLnBhcmVudCwgdHJ1ZSkNCiAgICAgICAgdGhpcy5zZWxlY3RlZFBhcmVudChjdXJyZW50Tm9kZS5wYXJlbnQpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDop5LoibLmjojmnYMNCiAgICBhdXRob3JpemUoKSB7DQogICAgICB0aGlzLnN0ZXAgPSAzDQogICAgICBjb25zdCBwZXJtaXNzaW9uSWRzID0gdGhpcy4kcmVmcy5wZXJtaXNzaW9ucy5nZXRDaGVja2VkS2V5cygpDQogICAgICB1cGRhdGVSb2xlUGVybWlzc2lvbnModGhpcy5jdXJyZW50SWQsIHBlcm1pc3Npb25JZHMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogJ+aOiOadg+aIkOWKnycsDQogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuc2VhcmNoKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyBjdUZvcm3lrZDnu4Tku7YNCiAgICBjcmVhdGVSb2xlKCkgew0KICAgICAgdGhpcy5jdURpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICB1cGRhdGVSb2xlKHJvdykgew0KICAgICAgdGhpcy5jdXJJZCA9IHJvdy5pZA0KICAgICAgdGhpcy5jdURpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuY3VEaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuY3VySWQgPSBudWxsDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/roles","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row>\r\n      <el-col :span=\"17\">\r\n        <el-form ref=\"form\" :model=\"form\" inline>\r\n          <el-form-item prop=\"search\">\r\n            <el-input v-model=\"form.search\" clearable style=\"width:300px\" prefix-icon=\"el-icon-search\" placeholder=\"输入角色名、描述搜索\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"success\" icon=\"el-icon-search\" size=\"medium\" @click=\"search('search')\">搜索</el-button>\r\n            <el-button type=\"warning\" icon=\"el-icon-refresh-left\" size=\"medium\" @click=\"resetForm()\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button v-permission=\"['admin','system-roles-add']\" type=\"primary\" style=\"margin-bottom:20px\" icon=\"el-icon-plus\" size=\"medium\" @click=\"createRole()\">新增</el-button>\r\n        <el-button v-permission=\"['admin','system-roles-mdel']\" type=\"danger\" icon=\"el-icon-delete\" :disabled=\"multipleSelection.length ? false : true\" size=\"medium\" @click=\"deleteRoles(form)\">删除</el-button>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n        <el-steps :active=\"step\" finish-status=\"success\" simple style=\"margin-top: 20px; padding:20px 2%\">\r\n          <el-step title=\"点击角色\" />\r\n          <el-step title=\"分配权限\" />\r\n          <el-step title=\"点击授权\" />\r\n        </el-steps>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row>\r\n      <el-col :span=\"17\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>角色列表</span>\r\n          </div>\r\n          <el-table\r\n            ref=\"multipleTable\"\r\n            :data=\"tableData\"\r\n            :row-key=\"getRowKeys\"\r\n            style=\"width: 100%\"\r\n            highlight-current-row\r\n            @current-change=\"tableHandleCurrentChange\"\r\n            @selection-change=\"handleSelectionChange\"\r\n          >\r\n            <el-table-column\r\n              type=\"selection\"\r\n              :selectable=\"checkSelectTable\"\r\n              width=\"55\"\r\n            />\r\n            <el-table-column\r\n              prop=\"name\"\r\n              label=\"角色\"\r\n            />\r\n            <el-table-column\r\n              prop=\"desc\"\r\n              label=\"描述\"\r\n            />\r\n            <el-table-column\r\n              prop=\"create_time\"\r\n              label=\"创建时间\"\r\n              width=\"180\"\r\n            />\r\n            <el-table-column\r\n              fixed=\"right\"\r\n              align=\"center\"\r\n              label=\"操作\"\r\n              width=\"220\"\r\n            >\r\n              <template slot-scope=\"{row}\">\r\n                <el-button v-permission=\"['admin','system-roles-update']\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click.native.stop=\"updateRole(row)\">编辑</el-button>\r\n                <el-button v-permission=\"['admin','system-roles-del']\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click.native.stop=\"deleteRole(row)\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <!--分页组件-->\r\n          <el-pagination\r\n            :current-page=\"1\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"10\"\r\n            :total=\"total\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n          />\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n        <el-card class=\"permissions-box-card\" style=\"margin-left:10px\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>权限分配</span>\r\n            <el-button v-permission=\"['admin','system-roles-auth']\" :disabled=\"!showButton\" type=\"primary\" style=\"float: right\" icon=\"el-icon-check\" size=\"medium\" @click=\"authorize()\">授权</el-button>\r\n          </div>\r\n          <el-tree\r\n            ref=\"permissions\"\r\n            :data=\"permissionsData\"\r\n            :default-checked-keys=\"permissionIds\"\r\n            :props=\"defaultProps\"\r\n            check-strictly\r\n            accordion\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            @check=\"handleCheckClick\"\r\n          />\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <cuForm :dialog-visible=\"cuDialogVisible\" :cur-id=\"curId\" @close=\"close\" @search=\"search\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport cuForm from './components/cuForm'\r\nimport { getRoles, updateRolePermissions, deleteRole, deleteRoles } from '@/api/system/roles'\r\nimport { getPermissions } from '@/api/system/permissions'\r\nexport default {\r\n  name: 'Roles',\r\n  components: { cuForm },\r\n  data() {\r\n    return {\r\n      form: {\r\n        page: 1,\r\n        size: 10,\r\n        search: '',\r\n        ordering: 'id'\r\n      },\r\n      tableData: [],\r\n      total: 0,\r\n      multipleSelection: [],\r\n      currentId: null,\r\n      // 权限数部分数据\r\n      step: 0,\r\n      showButton: false,\r\n      permissionsData: [],\r\n      permissionIds: [],\r\n      defaultProps: { children: 'children', label: 'label' },\r\n      // cuForm数据\r\n      cuDialogVisible: false,\r\n      curId: null\r\n    }\r\n  },\r\n  created() {\r\n    this.search()\r\n    this.getPermissions()\r\n  },\r\n  methods: {\r\n    // 获取角色列表/搜索功能\r\n    search(search) {\r\n      if (search) {\r\n        // 清空权限菜单部分数据\r\n        this.showButton = false\r\n        this.permissionIds = []\r\n        this.$refs.permissions.setCheckedKeys([])\r\n        this.changeDisabled(this.permissionsData, false)\r\n        this.step = 0\r\n        this.currentId = null\r\n      }\r\n      getRoles(this.form).then(res => {\r\n        this.tableData = res.data.results\r\n        this.total = res.data.count\r\n      })\r\n    },\r\n    // 重置\r\n    resetForm() {\r\n      this.$refs.form.resetFields()\r\n      this.search('search')\r\n    },\r\n    getRowKeys(row) {\r\n      return row.id\r\n    },\r\n    // 获取Permissions Tree的所有ID\r\n    getAllPermissionDataId(array, datas) {\r\n      for (const index in datas) {\r\n        const id = datas[index].id\r\n        array.push(id)\r\n        if (datas[index].children) {\r\n          this.getAllPermissionDataId(array, datas[index].children)\r\n        }\r\n      }\r\n      return array\r\n    },\r\n    // 更改Permissions Tree的disabled属性\r\n    changeDisabled(data, disabled) {\r\n      for (let index = 0; index < data.length; index++) {\r\n        const children = data[index].children\r\n        if (children !== undefined) {\r\n          this.changeDisabled(children, disabled)\r\n        }\r\n        data[index].disabled = disabled\r\n      }\r\n    },\r\n    // table选择框功能的change事件\r\n    handleSelectionChange() {\r\n      const deleteIds = []\r\n      this.$refs.multipleTable.selection.forEach(data => deleteIds.push(data.id))\r\n      this.multipleSelection = deleteIds\r\n    },\r\n    // 设置admin角色行不可勾选\r\n    checkSelectTable(row) {\r\n      return row.name !== 'admin'\r\n    },\r\n    // table单选触发单选\r\n    tableHandleCurrentChange(val) {\r\n      if (val) {\r\n        // 清空菜单的选中\r\n        this.$refs.permissions.setCheckedKeys([])\r\n        if (val.name === 'admin') {\r\n          this.changeDisabled(this.permissionsData, true)\r\n          this.permissionIds = this.getAllPermissionDataId([], this.permissionsData)\r\n          this.showButton = false\r\n          this.step = 3\r\n        } else {\r\n          this.changeDisabled(this.permissionsData, false)\r\n          // 保存当前的角色id\r\n          this.currentId = val.id\r\n          // 初始化默认选中的key\r\n          this.permissionIds = val.permissions\r\n          // 显示授权按钮\r\n          this.showButton = true\r\n          // 步骤显示\r\n          this.step = 1\r\n        }\r\n      }\r\n    },\r\n    // 删除角色\r\n    deleteRole(row) {\r\n      this.$confirm('此操作将删除角色 \"' + row.name + '\" , 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteRole(row.id).then(res => {\r\n          this.$message({\r\n            message: '删除角色' + row.name + '成功',\r\n            type: 'success'\r\n          })\r\n          // 刷新table\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n    // 批量删除用户\r\n    deleteRoles() {\r\n      this.$confirm('此操作将删除选中角色' + ', 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteRoles(this.multipleSelection).then(res => {\r\n          this.$message({\r\n            message: '删除用户成功',\r\n            type: 'success'\r\n          })\r\n          // 刷新table\r\n          this.search()\r\n        })\r\n      })\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.form.size = val\r\n      this.search()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.form.page = val\r\n      this.search()\r\n    },\r\n    // 获取权限数结构数据\r\n    getPermissions() {\r\n      getPermissions().then(res => {\r\n        this.permissionsData = res.data.results\r\n      })\r\n    },\r\n    // tree权限节点被点击时的回调\r\n    handleCheckClick(currentObj, treeStatus) {\r\n      if (this.currentId) {\r\n        this.step = 2\r\n      }\r\n      // 用于：父子节点严格互不关联时，父节点勾选变化时通知子节点同步变化，实现单向关联。\r\n      const selected = treeStatus.checkedKeys.indexOf(currentObj.id) // -1未选中\r\n      // 选中\r\n      if (selected !== -1) {\r\n        // 子节点只要被选中父节点就被选中\r\n        this.selectedParent(currentObj)\r\n        // 统一处理子节点为相同的勾选状态\r\n        this.uniteChildSame(currentObj, true)\r\n      } else {\r\n        // 未选中 处理子节点全部未选中\r\n        if (currentObj.children !== undefined) {\r\n          if (currentObj.children.length !== 0) {\r\n            this.uniteChildSame(currentObj, false)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 统一处理子节点为相同的勾选状态\r\n    uniteChildSame(treeList, isSelected) {\r\n      this.$refs.permissions.setChecked(treeList.id, isSelected)\r\n      if (treeList.children !== undefined) {\r\n        for (let i = 0; i < treeList.children.length; i++) {\r\n          this.uniteChildSame(treeList.children[i], isSelected)\r\n        }\r\n      }\r\n    },\r\n    // 统一处理父节点为选中\r\n    selectedParent(currentObj) {\r\n      const currentNode = this.$refs.permissions.getNode(currentObj)\r\n      if (currentNode.parent.key !== undefined) {\r\n        this.$refs.permissions.setChecked(currentNode.parent, true)\r\n        this.selectedParent(currentNode.parent)\r\n      }\r\n    },\r\n    // 角色授权\r\n    authorize() {\r\n      this.step = 3\r\n      const permissionIds = this.$refs.permissions.getCheckedKeys()\r\n      updateRolePermissions(this.currentId, permissionIds).then(res => {\r\n        this.$message({\r\n          message: '授权成功',\r\n          type: 'success'\r\n        })\r\n        this.search()\r\n      })\r\n    },\r\n    // cuForm子组件\r\n    createRole() {\r\n      this.cuDialogVisible = true\r\n    },\r\n    updateRole(row) {\r\n      this.curId = row.id\r\n      this.cuDialogVisible = true\r\n    },\r\n    close() {\r\n      this.cuDialogVisible = false\r\n      this.curId = null\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.permissions-box-card{\r\n  ::v-deep{\r\n    .el-card__body{\r\n      max-height: 400px;\r\n      overflow-y: auto;\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n"]}]}